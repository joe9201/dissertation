"use strict";(self.webpackChunkcausalvis=self.webpackChunkcausalvis||[]).push([[890],{5175:(t,e,n)=>{n.r(e),n.d(e,{CohortModel:()=>d,CohortView:()=>f,DAGModel:()=>c,DAGView:()=>s,ReactModel:()=>u,ReactView:()=>l,VersionHistoryModel:()=>m,VersionHistoryView:()=>h,version:()=>p.i8});var r=n(7672),a=n(6271),i=n(4456);a.createElement;var o={...n(1602),...n(329),...n(2405),...n(7619)};class u extends r.DOMWidgetModel{defaults(){return{...super.defaults(),_model_name:"HelloModel",_view_name:"HelloView",_model_module:"causalvis",_view_module:"causalvis",_model_module_version:"0.1.0",_view_module_version:"0.1.0",value:{},props:{}}}}class l extends r.DOMWidgetView{render(){this.value_changed(),this.model.on("change:props",this.value_changed,this)}value_changed(){var t=this.model.get("props"),e=a.createElement(o[this.model.attributes.component],t);i.render(e,this.el)}input_changed(){this.model.set("value",this.input.value),this.model.save_changes()}}class c extends r.DOMWidgetModel{defaults(){return{...super.defaults(),_model_name:"HelloModel",_view_name:"HelloView",_model_module:"causalvis",_view_module:"causalvis",_model_module_version:"0.1.0",_view_module_version:"0.1.0",value:"Hello World!"}}}class s extends r.DOMWidgetView{render(){this.value_changed(),this.model.on("change:props",this.value_changed,this),this.inputDAG=document.createElement("input"),this.inputDAG.type="text",this.inputDAG.id=`_hiddenDAG${this.model.model_id}`,this.inputDAG.style.display="none",this.inputDAG.value=this.model.get("DAG"),this.inputDAG.oninput=this.dag_changed.bind(this),this.el.appendChild(this.inputDAG),this.inputColliders=document.createElement("input"),this.inputColliders.type="text",this.inputColliders.id=`_hiddenColliders${this.model.model_id}`,this.inputColliders.style.display="none",this.inputColliders.value=this.model.get("colliders"),this.inputColliders.oninput=this.colliders_changed.bind(this),this.el.appendChild(this.inputColliders),this.inputMediators=document.createElement("input"),this.inputMediators.type="text",this.inputMediators.id=`_hiddenMediators${this.model.model_id}`,this.inputMediators.style.display="none",this.inputMediators.value=this.model.get("mediators"),this.inputMediators.oninput=this.mediators_changed.bind(this),this.el.appendChild(this.inputMediators),this.inputConfounds=document.createElement("input"),this.inputConfounds.type="text",this.inputConfounds.id=`_hiddenConfounds${this.model.model_id}`,this.inputConfounds.style.display="none",this.inputConfounds.value=this.model.get("confounds"),this.inputConfounds.oninput=this.confounds_changed.bind(this),this.el.appendChild(this.inputConfounds),this.inputPrognostics=document.createElement("input"),this.inputPrognostics.type="text",this.inputPrognostics.id=`_hiddenPrognostics${this.model.model_id}`,this.inputPrognostics.style.display="none",this.inputPrognostics.value=this.model.get("prognostics"),this.inputPrognostics.oninput=this.prognostics_changed.bind(this),this.el.appendChild(this.inputPrognostics)}value_changed(){var t=this.model.get("props");t={...t,_svg:`svgDAG${this.model.model_id}`,_dag:`_hiddenDAG${this.model.model_id}`,_colliders:`_hiddenColliders${this.model.model_id}`,_mediators:`_hiddenMediators${this.model.model_id}`,_confounds:`_hiddenConfounds${this.model.model_id}`,_prognostics:`_hiddenPrognostics${this.model.model_id}`};var e=a.createElement(o[this.model.attributes.component],t);i.render(e,this.el)}dag_changed(){this.model.set("DAG",JSON.parse(this.inputDAG.value)),this.model.save_changes()}colliders_changed(){this.model.set("colliders",JSON.parse(this.inputColliders.value)),this.model.save_changes()}mediators_changed(){this.model.set("mediators",JSON.parse(this.inputMediators.value)),this.model.save_changes()}confounds_changed(){this.model.set("confounds",JSON.parse(this.inputConfounds.value)),this.model.save_changes()}prognostics_changed(){this.model.set("prognostics",JSON.parse(this.inputPrognostics.value)),this.model.save_changes()}}class d extends r.DOMWidgetModel{defaults(){return{...super.defaults(),_model_name:"HelloModel",_view_name:"HelloView",_model_module:"causalvis",_view_module:"causalvis",_model_module_version:"0.1.0",_view_module_version:"0.1.0",value:"Hello World!"}}}class f extends r.DOMWidgetView{render(){this.value_changed(),this.model.on("change:props",this.value_changed,this),this.inputSelection=document.createElement("input"),this.inputSelection.type="text",this.inputSelection.id=`_hiddenSelection${this.model.model_id}`,this.inputSelection.style.display="none",this.inputSelection.value=this.model.get("selection"),this.inputSelection.oninput=this.selection_changed.bind(this),this.el.appendChild(this.inputSelection),this.inputInverseSelection=document.createElement("input"),this.inputInverseSelection.type="text",this.inputInverseSelection.id=`_hiddenInverseSelection${this.model.model_id}`,this.inputInverseSelection.style.display="none",this.inputInverseSelection.value=this.model.get("iselection"),this.inputInverseSelection.oninput=this.iselection_changed.bind(this),this.el.appendChild(this.inputInverseSelection)}value_changed(){var t=this.model.get("props");t={...t,_selection:`_hiddenSelection${this.model.model_id}`,_iselection:`_hiddenInverseSelection${this.model.model_id}`};var e=a.createElement(o[this.model.attributes.component],t);i.render(e,this.el)}selection_changed(){this.model.set("selection",JSON.parse(this.inputSelection.value)),this.model.save_changes()}iselection_changed(){this.model.set("iselection",JSON.parse(this.inputInverseSelection.value)),this.model.save_changes()}}class m extends r.DOMWidgetModel{defaults(){return{...super.defaults(),_model_name:"HelloModel",_view_name:"HelloView",_model_module:"causalvis",_view_module:"causalvis",_model_module_version:"0.1.0",_view_module_version:"0.1.0",value:"Hello World!"}}}class h extends r.DOMWidgetView{render(){this.value_changed(),this.model.on("change:props",this.value_changed,this),this.inputVersionDAG=document.createElement("input"),this.inputVersionDAG.type="text",this.inputVersionDAG.id=`_versionDAG${this.model.model_id}`,this.inputVersionDAG.style.display="none",this.inputVersionDAG.value=this.model.get("DAG"),this.inputVersionDAG.oninput=this.versionDAG_changed.bind(this),this.el.appendChild(this.inputVersionDAG),this.inputVersionCohort=document.createElement("input"),this.inputVersionCohort.type="text",this.inputVersionCohort.id=`_versionCohort${this.model.model_id}`,this.inputVersionCohort.style.display="none",this.inputVersionCohort.value=this.model.get("cohort"),this.inputVersionCohort.oninput=this.versionCohort_changed.bind(this),this.el.appendChild(this.inputVersionCohort)}value_changed(){var t=this.model.get("props");t={...t,_dag:`_versionDAG${this.model.model_id}`,_cohort:`_versionCohort${this.model.model_id}`};var e=a.createElement(o[this.model.attributes.component],t);i.render(e,this.el)}versionDAG_changed(){this.model.set("DAG",JSON.parse(this.inputVersionDAG.value)),this.model.save_changes()}versionCohort_changed(){this.model.set("cohort",JSON.parse(this.inputVersionCohort.value)),this.model.save_changes()}}const p={i8:"0.1.0"}},5053:(t,e,n)=>{e.__esModule=!0,e.Attribute=void 0;var r=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=l(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=a?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}(n(6271)),a=u(n(2093)),i=u(n(2441)),o=u(n(960));function u(t){return t&&t.__esModule?t:{default:t}}function l(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(l=function(t){return t?n:e})(t)}n(4368),e.Attribute=function(t){var e=t.value,n=void 0===e?[]:e,u=t.color,l=void 0===u?"black":u,c=t.isAdded,s=void 0!==c&&c,d=t.treatment,f=t.outcome,m=t.addAttribute,h=t.deleteAttribute,p=t.changeTreatment,g=t.changeOutcome,y=t.handleAddTag,v={grey:{rgb:"rgb(158, 158, 158)",rgba:"rgba(158, 158, 158, 0.05)"},treatment:{rgb:"rgb(78, 121, 167)",rgba:"rgba(78, 121, 167, 0.05)"},outcome:{rgb:"rgb(242, 142, 44)",rgba:"rgba(242, 142, 44, 0.05)"},black:{rgb:"rgb(0, 0, 0)",rgba:"rgba(0, 0, 0, 0.05)"}},x=r.default.useState(!1),b=x[0],j=x[1],k=r.default.useState(null),w=k[0],E=k[1];function M(){E(null),j(!1)}var O={width:"100%",marginBottom:"5px",color:v[l].rgb,borderColor:v[l].rgb,"&:hover":{borderColor:v[l].rgb,backgroundColor:v[l].rgba}};return r.default.createElement("div",null,r.default.createElement(a.default,{sx:O,onClick:function(){return m(n)},onContextMenu:function(t){return function(t){t.preventDefault(),s&&(j(!b),E({left:t.clientX+2,top:t.clientY-6}))}(t)},variant:"outlined"},r.default.createElement("a",{title:"click to add"},n)),r.default.createElement(i.default,{id:"basic-menu",anchorReference:"anchorPosition",anchorPosition:w,style:{},open:b,onClose:M,MenuListProps:{"aria-labelledby":"basic-button"}},r.default.createElement(o.default,{onClick:function(){d===n?(p(""),M()):f===n?(p(n),g(""),M()):(p(n),M())},selected:n===d},"Set as Treatment"),r.default.createElement(o.default,{onClick:function(){f===n?(g(""),M()):d===n?(g(n),p(""),M()):(g(n),M())},selected:n===f},"Set as Outcome"),r.default.createElement(o.default,{onClick:function(){y(n),M()}},"Edit Tags"),r.default.createElement(o.default,{onClick:function(){h(n),M()}},"Delete from Graph")))}},1817:(t,e,n)=>{e.__esModule=!0,e.AttributesManager=void 0;var r=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=l(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=a?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}(n(6271)),a=(n(461),n(4368),n(5053)),i=u(n(2093)),o=(u(n(2441)),u(n(960)),u(n(4431)));function u(t){return t&&t.__esModule?t:{default:t}}function l(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(l=function(t){return t?n:e})(t)}e.AttributesManager=function(t){var e,n=t.attributes,u=void 0===n?[]:n,l=t.added,c=void 0===l?[]:l,s=t.treatment,d=t.outcome,f=t.addAttribute,m=t.deleteAttribute,h=t.changeTreatment,p=t.changeOutcome,g=t.handleAddTag,y=t.handleNodeOpen;function v(t){return s===t?"treatment":d===t?"outcome":c.indexOf(t)>=0?"black":"grey"}var x=((e={width:"100%",marginBottom:"5px"}).width="150px",e);return r.default.createElement("div",null,r.default.createElement(i.default,{style:x,startIcon:r.default.createElement(o.default,null),variant:"contained",onClick:function(){return y()}},r.default.createElement("a",{title:"click to add"},"Add Node")),r.default.createElement("div",{style:{display:"flex",flexDirection:"column",width:"150px",marginRight:"20px",height:"500px",overflow:"scroll"}},u.map((function(t,e){return r.default.createElement(a.Attribute,{key:e,value:t,isAdded:c.indexOf(t)>=0,color:v(t),treatment:s,outcome:d,addAttribute:f,deleteAttribute:m,changeTreatment:h,changeOutcome:p,handleAddTag:g})}))))}},2065:(t,e,n)=>{e.__esModule=!0,e.DAGEditor=void 0;var r=d(n(6271)),a=d(n(5651)),i=c(n(4113)),o=c(n(2441)),u=c(n(960)),l=c(n(4839));function c(t){return t&&t.__esModule?t:{default:t}}function s(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(s=function(t){return t?n:e})(t)}function d(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=s(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=a?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function f(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}e.DAGEditor=function(t){var e=t.layout,n=void 0===e?{height:500,width:1e3,margin:60}:e,c=t.nodelinks,s=void 0===c?{}:c,d=t.mode,m=void 0===d?"default":d,h=t.treatment,p=void 0===h?"":h,g=t.outcome,y=void 0===g?"":g,v=t.mediators,x=void 0===v?[]:v,b=t.colliders,j=void 0===b?[]:b,k=t.confounds,w=void 0===k?[]:k,E=t.prognostics,M=void 0===E?[]:E,O=t.search,S=t.updateNodePos,A=t.deleteAttribute,C=t.changeTreatment,_=t.changeOutcome,P=t.updateLinks,D=t.deleteLinks,L=t._svg,T=r.default.useState(!1),B=T[0],I=T[1],W=r.default.useState(null),z=W[0],V=W[1],R=r.default.useState(null),N=R[0],Q=R[1],G=r.default.useState([]),J=G[0],H=(G[1],r.default.useState({treatment:"#4e79a7",outcome:"#f28e2c",confounds:"#e15759",colliders:"#76b7b2",mediators:"#59a14f",prognostics:"#b07AA1"})),$=H[0];function F(){V(null),Q(null),I(!1)}function U(t){return!(!O||O!==t.name&&!(O.startsWith("tag:")&&t.tags&&t.tags.indexOf(O.slice(4))>=0))}H[1],(0,r.useEffect)((function(){O?ot.filter((function(t){return U(t)})).attr("stroke-width","3px"):ot.attr("stroke-width","1px")}),[O]),(0,r.useEffect)((function(){for(var t,e=function(){var e=t.value;ot.filter((function(t){return t.name===e})).attr("stroke",$.mediators),at.filter((function(t){return t.name===e})).attr("fill",$.mediators)},n=f(x);!(t=n()).done;)e();for(var r,a=function(){var t=r.value;ot.filter((function(e){return e.name===t})).attr("stroke",$.colliders),at.filter((function(e){return e.name===t})).attr("fill",$.colliders)},i=f(j);!(r=i()).done;)a();for(var o,u=function(){var t=o.value;ot.filter((function(e){return e.name===t})).attr("stroke",$.confounds),at.filter((function(e){return e.name===t})).attr("fill",$.confounds)},l=f(w);!(o=l()).done;)u()}),[x,j,w]);var q=(0,r.useRef)("svgDAG"),Y=[],Z=a.select(q.current),X=Z.select("g"),K=a.zoom().extent([[0,0],[n.width,n.height]]).scaleExtent([.1,8]).on("zoom",(function(t){var e=t.transform;X.attr("transform",e)}));function tt(t,e,n){return t<0&&e<0?2*Math.PI-n:t<0&&e>0?Math.PI+n:t>0&&e>0?Math.PI-n:0===t&&e<0?0:0===t&&e>0?Math.PI:t>0&&0===e?Math.PI/2:t<0&&0===e?Math.PI/2*3:n}Z.call(K);var et=X.select("#links").selectAll(".arrowleft").data(s.links).join("line").attr("class","arrowleft").attr("x1",(function(t){return(t.target.x-t.source.x)/2+t.source.x})).attr("y1",(function(t){return(t.target.y-t.source.y)/2+t.source.y})).attr("x2",(function(t){var e=t.target.y-t.source.y,n=t.target.x-t.source.x,r=tt(e,n,Math.atan(Math.abs(e/n)));return(t.target.x-t.source.x)/2+t.source.x+10*Math.cos(r+Math.PI/5)})).attr("y2",(function(t){var e=t.target.y-t.source.y,n=t.target.x-t.source.x,r=tt(e,n,Math.atan(Math.abs(e/n)));return(t.target.y-t.source.y)/2+t.source.y-10*Math.sin(r+Math.PI/5)})).attr("stroke","black").attr("stroke-width",1),nt=X.select("#links").selectAll(".arrowright").data(s.links).join("line").attr("class","arrowright").attr("x1",(function(t){return(t.target.x-t.source.x)/2+t.source.x})).attr("y1",(function(t){return(t.target.y-t.source.y)/2+t.source.y})).attr("x2",(function(t){var e=t.target.y-t.source.y,n=t.target.x-t.source.x,r=tt(e,n,Math.atan(Math.abs(e/n)));return(t.target.x-t.source.x)/2+t.source.x+10*Math.cos(r-Math.PI/5)})).attr("y2",(function(t){var e=t.target.y-t.source.y,n=t.target.x-t.source.x,r=tt(e,n,Math.atan(Math.abs(e/n)));return(t.target.y-t.source.y)/2+t.source.y-10*Math.sin(r-Math.PI/5)})).attr("stroke","black").attr("stroke-width",1);function rt(t){return t.name===p?$.treatment:t.name===y?$.outcome:x.indexOf(t.name)>=0?$.mediators:j.indexOf(t.name)>=0?$.colliders:w.indexOf(t.name)>=0?$.confounds:M.indexOf(t.name)>=0?$.prognostics:"black"}var at=X.select("#nodeNames").selectAll(".nodeName").data(s.nodes).join("text").attr("class","nodeName").text((function(t){return t.name})).attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y})).attr("fill",(function(t){return rt(t)})).attr("text-anchor","middle").attr("alignment-baseline","middle").attr("font-family","sans-serif").attr("font-size","12px"),it=X.select("#links").selectAll(".link").data(s.links).join("line").attr("class","link").attr("x1",(function(t){return t.source.x})).attr("y1",(function(t){return t.source.y})).attr("x2",(function(t){return t.target.x})).attr("y2",(function(t){return t.target.y})).attr("stroke","black").attr("stroke-width",1).on("mouseover",(function(){"path"===m&&a.select(this).attr("stroke-width",3)})).on("mouseout",(function(){"path"===m&&a.select(this).attr("stroke","black").attr("stroke-width",1)})).on("click",(function(t,e){"path"===m&&D(e)})),ot=X.select("#nodes").selectAll(".node").data(s.nodes).join("ellipse").attr("class","node").attr("rx",50).attr("ry",20).attr("cx",(function(t){return t.x})).attr("cy",(function(t){return t.y})).attr("fill","white").attr("stroke",(function(t){return rt(t)})).attr("stroke-width",(function(t){return function(t){return J.indexOf(t.name)>=0||U(t)?3:1}(t)})).attr("stroke-dasharray",(function(t){return t.$custom?"5 5 2 5":"none"})).attr("cursor","pointer").call(a.drag().on("start",(function(t,e){})).on("drag",(function(t,e){"default"===m&&function(t,e,n){a.select(t).attr("cx",e.x).attr("cy",e.y),at.filter((function(t){return t.id===n.id})).attr("x",e.x).attr("y",e.y),it.filter((function(t){return t.source.id===n.id})).attr("x1",e.x).attr("y1",e.y),it.filter((function(t){return t.target.id===n.id})).attr("x2",e.x).attr("y2",e.y),et.filter((function(t){return t.target.id===n.id})).attr("x1",(function(t){return(e.x-t.source.x)/2+t.source.x})).attr("y1",(function(t){return(e.y-t.source.y)/2+t.source.y})).attr("x2",(function(t){var n=e.y-t.source.y,r=e.x-t.source.x,a=tt(n,r,Math.atan(Math.abs(n/r)));return(e.x-t.source.x)/2+t.source.x+10*Math.cos(a+Math.PI/5)})).attr("y2",(function(t){var n=e.y-t.source.y,r=e.x-t.source.x,a=tt(n,r,Math.atan(Math.abs(n/r)));return(e.y-t.source.y)/2+t.source.y-10*Math.sin(a+Math.PI/5)})),et.filter((function(t){return t.source.id===n.id})).attr("x1",(function(t){return(t.target.x-e.x)/2+e.x})).attr("y1",(function(t){return(t.target.y-e.y)/2+e.y})).attr("x2",(function(t){var n=t.target.y-e.y,r=t.target.x-e.x,a=tt(n,r,Math.atan(Math.abs(n/r)));return(t.target.x-e.x)/2+e.x+10*Math.cos(a+Math.PI/5)})).attr("y2",(function(t){var n=t.target.y-e.y,r=t.target.x-e.x,a=tt(n,r,Math.atan(Math.abs(n/r)));return(t.target.y-e.y)/2+e.y-10*Math.sin(a+Math.PI/5)})).attr("stroke","black").attr("stroke-width",1),nt.filter((function(t){return t.target.id===n.id})).attr("x1",(function(t){return(e.x-t.source.x)/2+t.source.x})).attr("y1",(function(t){return(e.y-t.source.y)/2+t.source.y})).attr("x2",(function(t){var n=e.y-t.source.y,r=e.x-t.source.x,a=tt(n,r,Math.atan(Math.abs(n/r)));return(e.x-t.source.x)/2+t.source.x+10*Math.cos(a-Math.PI/5)})).attr("y2",(function(t){var n=e.y-t.source.y,r=e.x-t.source.x,a=tt(n,r,Math.atan(Math.abs(n/r)));return(e.y-t.source.y)/2+t.source.y-10*Math.sin(a-Math.PI/5)})),nt.filter((function(t){return t.source.id===n.id})).attr("x1",(function(t){return(t.target.x-e.x)/2+e.x})).attr("y1",(function(t){return(t.target.y-e.y)/2+e.y})).attr("x2",(function(t){var n=t.target.y-e.y,r=t.target.x-e.x,a=tt(n,r,Math.atan(Math.abs(n/r)));return(t.target.x-e.x)/2+e.x+10*Math.cos(a-Math.PI/5)})).attr("y2",(function(t){var n=t.target.y-e.y,r=t.target.x-e.x,a=tt(n,r,Math.atan(Math.abs(n/r)));return(t.target.y-e.y)/2+e.y-10*Math.sin(a-Math.PI/5)})).attr("stroke","black").attr("stroke-width",1)}(this,t,e)})).on("end",(function(t,e){"default"===m&&S(e.id,t.x,t.y)}))).on("click",(function(t,e){if(t.stopPropagation(),"path"===m){if(1===Y.length&&e.id===Y[0].id)return a.select(this).attr("stroke-width",1),void(Y=[]);Y.push(e),a.select(this).attr("stroke-width",3),2===Y.length&&(P(Y),Y=[])}})).on("mouseover",(function(t,e){"path"===m&&a.select(this).attr("stroke-width",3)})).on("mouseout",(function(t,e){"path"===m&&Y.map((function(t){return t.name})).indexOf(e.name)<0&&e.name!==O?a.select(this).attr("stroke-width",1):"default"!==m||U(e)||a.select(this).attr("stroke-width",1)})),ut=["treatment","outcome","confounds","colliders","mediators","prognostics"];return Z.select("#legend").selectAll(".legendRect").data(ut).join("rect").attr("class","legendRect").attr("x",n.width-2*n.margin).attr("y",(function(t,e){return n.height-2*n.margin+18*e})).attr("width",15).attr("height",15).attr("fill",(function(t){return $[t]})),Z.select("#legend").selectAll(".legendText").data(ut).join("text").attr("class","legendText").attr("x",n.width-2*n.margin+18).attr("y",(function(t,e){return n.height-2*n.margin+18*e+9})).attr("alignment-baseline","middle").attr("text-anchor","start").attr("fill",(function(t){return $[t]})).attr("font-family","sans-serif").attr("font-size","12px").text((function(t){return t})),r.default.createElement("div",null,r.default.createElement(o.default,{id:"basic-menu",anchorReference:"anchorPosition",anchorPosition:z,style:{},open:B,onClose:F,MenuListProps:{"aria-labelledby":"basic-button"}},r.default.createElement(u.default,{onClick:function(){p===N?(C(""),F()):y===N?(C(N),_(""),F()):(C(N),F())},selected:N===p},"Set as Treatment"),r.default.createElement(u.default,{onClick:function(){y===N?(_(""),F()):p===N?(_(N),C(""),F()):(_(N),F())},selected:N===y},"Set as Outcome"),r.default.createElement(u.default,{onClick:function(){0===J.length&&(A(N),F())}},"Delete from Graph")),r.default.createElement(i.default,{id:"fitScreen",onClick:function(){Z.transition().duration(750).call(K.transform,a.zoomIdentity)}},r.default.createElement("a",{style:{height:"24px"},title:"reset zoom"},r.default.createElement(l.default,null))),r.default.createElement("svg",{width:n.width,height:n.height,ref:q,id:L},r.default.createElement("g",null,r.default.createElement("g",{id:"links"}),r.default.createElement("g",{id:"nodes"}),r.default.createElement("g",{id:"nodeNames"})),r.default.createElement("g",{id:"legend"})))}},1660:(t,e,n)=>{e.__esModule=!0,e.DownloadDialog=void 0;var r=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=v(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=a?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}(n(6271)),a=y(n(2093)),i=y(n(3446)),o=y(n(4146)),u=y(n(5641)),l=y(n(6202)),c=y(n(3700)),s=y(n(9071)),d=y(n(2154)),f=y(n(881)),m=y(n(3163)),h=y(n(7424)),p=y(n(3332)),g=n(5243);function y(t){return t&&t.__esModule?t:{default:t}}function v(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(v=function(t){return t?n:e})(t)}function x(){return x=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},x.apply(this,arguments)}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}e.DownloadDialog=function(t){var e=t.open,n=void 0!==e&&e,y=t.nodelinks,v=void 0===y?{}:y,j=t.treatment,k=void 0===j?"":j,w=t.outcome,E=void 0===w?"":w,M=t.confounds,O=void 0===M?[]:M,S=t.colliders,A=void 0===S?[]:S,C=t.mediators,_=void 0===C?[]:C,P=t.prognostics,D=void 0===P?[]:P,L=t.handleClose,T=r.default.useState({nodelinkCheck:!0,treatmentCheck:!1,outcomeCheck:!1,confoundsCheck:!1,mediatorsCheck:!1,collidersCheck:!1,prognosticsCheck:!1}),B=T[0],I=T[1],W=r.default.useState(!1),z=W[0],V=W[1],R=r.default.useState(""),N=R[0],Q=R[1],G=r.default.useState("DAG"),J=G[0],H=G[1];function $(t){B[t]=!B[t];var e=Object.values(B).filter((function(t){return t})).length<1;I(x({},B)),V(e)}return(0,r.useEffect)((function(){var t={};if(B.nodelinkCheck){t.nodes=JSON.parse(JSON.stringify(v.nodes));for(var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return b(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t.nodes);!(e=n()).done;){var r=e.value;delete r.children,delete r.parents}t.links=JSON.parse(JSON.stringify(v.links))}B.treatmentCheck&&(t.treatment=k),B.outcomeCheck&&(t.outcome=E),B.confoundsCheck&&(t.confounds=O),B.mediatorsCheck&&(t.mediators=_),B.collidersCheck&&(t.colliders=A),B.prognosticsCheck&&(t.prognostics=D),Q(t)}),[B,v,k,E,O,A,_,D]),r.default.createElement("div",null,r.default.createElement(o.default,{open:n,onClose:L,fullWidth:!0,maxWidth:"md"},r.default.createElement(s.default,null,"Download"),r.default.createElement(l.default,null,r.default.createElement(p.default,{style:{marginBottom:"24px"},defaultValue:J,id:"outlined-basic",label:"Filename",variant:"standard",onChange:function(t){return function(t){H(t.target.value)}(t)}}),r.default.createElement(c.default,null,"Select the data you would like to include. Your file will be saved as ",r.default.createElement("i",null,J,".json"),"."),r.default.createElement("div",{style:{display:"flex"}},r.default.createElement(d.default,{required:!0,error:z,component:"fieldset",sx:{m:3},variant:"standard"},r.default.createElement(f.default,{component:"legend"},"Select at least one"),r.default.createElement(m.default,{style:{width:"250px"}},r.default.createElement(h.default,{control:r.default.createElement(i.default,{checked:B.nodelinkCheck,onChange:function(){return $("nodelinkCheck")}}),label:"Node-Link"}),r.default.createElement(h.default,{control:r.default.createElement(i.default,{checked:B.treatmentCheck,onChange:function(){return $("treatmentCheck")}}),label:"Treatment"}),r.default.createElement(h.default,{control:r.default.createElement(i.default,{checked:B.outcomeCheck,onChange:function(){return $("outcomeCheck")}}),label:"Outcome"}),r.default.createElement(h.default,{control:r.default.createElement(i.default,{checked:B.confoundsCheck,onChange:function(){return $("confoundsCheck")}}),label:"Confounds"}),r.default.createElement(h.default,{control:r.default.createElement(i.default,{checked:B.mediatorsCheck,onChange:function(){return $("mediatorsCheck")}}),label:"Mediators"}),r.default.createElement(h.default,{control:r.default.createElement(i.default,{checked:B.collidersCheck,onChange:function(){return $("collidersCheck")}}),label:"Colliders"}),r.default.createElement(h.default,{control:r.default.createElement(i.default,{checked:B.prognosticsCheck,onChange:function(){return $("prognosticsCheck")}}),label:"Prognostics"}))),r.default.createElement(p.default,{style:{margin:"24px 24px 0px 0px"},id:"outlined-multiline-flexible",multiline:!0,fullWidth:!0,maxRows:20,value:JSON.stringify(N,null,4),InputProps:{readOnly:!0}}))),r.default.createElement(u.default,null,r.default.createElement(a.default,{onClick:L},"Cancel"),r.default.createElement(a.default,{onClick:function(){var t=new Blob([JSON.stringify(N,null,4)],{type:"application/json",name:J+".json"});(0,g.saveAs)(t,J+".json")}},"Save"))))}},4608:(t,e,n)=>{e.__esModule=!0,e.NodeDialog=void 0;var r=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=d(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=a?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}(n(6271)),a=s(n(2093)),i=s(n(4146)),o=s(n(5641)),u=s(n(6202)),l=s(n(3700)),c=(s(n(9071)),s(n(3332)));function s(t){return t&&t.__esModule?t:{default:t}}function d(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(d=function(t){return t?n:e})(t)}e.NodeDialog=function(t){var e=t.open,n=void 0!==e&&e,s=t.handleNodeClose,d=(t.addAttribute,t.addCustom),f=r.default.useState(""),m=f[0],h=f[1];return r.default.createElement("div",null,r.default.createElement(i.default,{open:n,onClose:s},r.default.createElement(u.default,null,r.default.createElement(l.default,null,"Add Custom Node"),r.default.createElement(c.default,{style:{margin:"24px 24px 0px 0px"},id:"outlined-basic",label:"Variable Name",variant:"outlined",onChange:function(t){return function(t){h(t.target.value)}(t)}})),r.default.createElement(o.default,null,r.default.createElement(a.default,{onClick:s},"Cancel"),r.default.createElement(a.default,{onClick:function(){""===m||(d(m),h("")),s()}},"Add"))))}},9726:(t,e,n)=>{e.__esModule=!0,e.TagDialog=void 0;var r=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=g(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=a?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}(n(6271)),a=n(1520),i=p(n(2489)),o=p(n(2093)),u=p(n(3570)),l=p(n(4146)),c=p(n(5641)),s=p(n(6202)),d=p(n(3700)),f=p(n(9071)),m=p(n(4094)),h=p(n(3332));function p(t){return t&&t.__esModule?t:{default:t}}function g(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(g=function(t){return t?n:e})(t)}function y(){return y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},y.apply(this,arguments)}e.TagDialog=function(t){var e=t.tagNode,n=void 0===e?"":e,p=t.tagColors,g=void 0===p?{}:p,v=t.attrTags,x=void 0===v?[]:v,b=t.open,j=void 0!==b&&b,k=t.handleTagClose,w=t.updateTag,E=t.deleteTag,M=r.default.useState(""),O=M[0],S=M[1],A=r.default.useState(!1),C=A[0],_=A[1],P=r.default.useState("#000000"),D=P[0],L=P[1],T={width:"100%",height:"100%",borderRadius:"4px",background:""+D},B={display:x.length>0?"block":"none",margin:"24px 10px 0px 0px"};return r.default.createElement("div",null,r.default.createElement(l.default,{open:j,onClose:k},r.default.createElement(f.default,null,"Add or Edit Tags"),r.default.createElement(s.default,null,r.default.createElement(d.default,null,"You are editing tags for the node: ",r.default.createElement("i",null,n)),r.default.createElement(m.default,{style:B,direction:"row",spacing:1},x.map((function(t,e){return r.default.createElement(u.default,{label:t,variant:"outlined",onDelete:function(){return function(t){E(t)}(t)},sx:{color:g[t]}})}))),r.default.createElement("div",{style:{display:"flex",alignItems:"center"}},r.default.createElement(i.default,{disablePortal:!0,freeSolo:!0,options:Object.keys(g),sx:{margin:"24px 10px 0px 0px",width:"300px"},onChange:function(t,e){return function(t,e){S(e),L(g[e])}(0,e)},onInputChange:function(t){return function(t){S(t.target.value)}(t)},renderInput:function(t){return r.default.createElement(h.default,y({},t,{label:"Tag Name"}))}}),r.default.createElement("div",{style:{margin:"24px 24px 0px 0px",width:"48px",height:"48px",padding:"4px",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.1)",display:"inline-block",cursor:"pointer"},onClick:function(){_(!C)}},r.default.createElement("div",{style:T}),C?r.default.createElement("div",{style:{position:"fixed",zIndex:"1301"}},r.default.createElement("div",{style:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},onClick:function(){_(!1)}}),r.default.createElement(a.SwatchesPicker,{color:D,onChange:function(t){L(t.hex)}})):null))),r.default.createElement(c.default,null,r.default.createElement(o.default,{onClick:k},"Close"),r.default.createElement(o.default,{onClick:function(){""===O||w(D,O),L("#000000")}},"Add"))))}},329:(t,e,n)=>{e.__esModule=!0,e.CohortEvaluator=void 0;var r,a=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=l(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=a?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}(n(6271)),i=(r=n(152))&&r.__esModule?r:{default:r},o=n(9579),u=n(1439);function l(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(l=function(t){return t?n:e})(t)}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}e.CohortEvaluator=function(t){var e=t.unadjustedCohort,n=void 0===e?[]:e,r=t.adjustedCohort,l=void 0===r?[]:r,s=t.treatment,d=void 0===s?"treatment":s,f=t.propensity,m=void 0===f?"propensity":f,h=t._selection,p=t._iselection,g=a.default.useState([]),y=g[0],v=g[1],x=a.default.useState({selectedData:[],treatment:!1}),b=x[0],j=x[1],k=a.default.useState({confounds:[],propensity:[],treatment:[]}),w=k[0],E=k[1],M=a.default.useState(null),O=M[0],S=M[1],A=JSON.parse(JSON.stringify(n)),C=(0,i.default)(A),_=a.default.useState({}),P=_[0],D=_[1];return(0,a.useEffect)((function(){var t=new Set(Object.keys(n[0]));t.delete(d),t.delete(m),t=Array.from(t),v(t);for(var e,r={},a=function(){var t=e.value,n=C.dimension((function(e){return e[t]}));r[t]=n},i=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);!(e=i()).done;)a();D(r);var o=JSON.parse(JSON.stringify(n)).map((function(t){return delete t.treatment,delete t.propensity,t})),u=n.map((function(t){return t.treatment})),l=n.map((function(t){return t.propensity}));E({confounds:o,propensity:l,treatment:u})}),[n]),(0,a.useEffect)((function(){if(l.length>0){var t=JSON.parse(JSON.stringify(l)).map((function(t){return delete t.treatment,delete t.propensity,t})),e=l.map((function(t){return t.treatment})),n=l.map((function(t){return t.propensity}));S({confounds:t,propensity:n,treatment:e})}}),[l]),a.default.createElement("div",null,a.default.createElement("div",{style:{display:"flex"}},a.default.createElement(u.PropDistribution,{unadjustedCohortData:w,adjustedCohortData:O,setSelected:j,_selection:h,_iselection:p}),a.default.createElement(o.CovariateBalance,{unadjustedCohortData:w,adjustedCohortData:O,attributes:y,updateFilter:function(t,e){var n=P[t];n.filter(e);var r=n.top(1/0),a=JSON.parse(JSON.stringify(r)).map((function(t){return delete t.treatment,delete t.propensity,t})),i=r.map((function(t){return t.treatment})),o=r.map((function(t){return t.propensity}));setCohortData({confounds:a,propensity:o,treatment:i})},selected:b})))}},8613:(t,e,n)=>{e.__esModule=!0,e.CompareDistributionVis=void 0;var r=c(n(6271)),a=c(n(5651)),i=u(n(4113)),o=u(n(2450));function u(t){return t&&t.__esModule?t:{default:t}}function l(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(l=function(t){return t?n:e})(t)}function c(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=l(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=a?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}e.CompareDistributionVis=function(t){var e=t.layout,n=void 0===e?{height:120,width:500,margin:20,marginLeft:30}:e,u=t.unadjustedAttribute,l=void 0===u?[]:u,c=t.adjustedAttribute,d=t.unadjustedTreatment,f=void 0===d?[]:d,m=t.adjustedTreatment,h=t.unadjustedPropensity,p=void 0===h?[]:h,g=t.adjustedPropensity,y=t.attribute,v=void 0===y?"":y,x=(t.updateFilter,t.selectedAttribute),b=void 0===x?[]:x,j=t.selectedTreatment,k=void 0!==j&&j,w=t.hideCovariate,E=r.default.useState([]),M=E[0],O=E[1],S=r.default.useState([]),A=S[0],C=S[1],_=r.default.useState([]),P=_[0],D=_[1],L=r.default.useState([]),T=L[0],B=L[1],I=r.default.useState((function(){return function(t){return t}})),W=I[0],z=I[1],V=r.default.useState((function(){return function(t){return t}})),R=V[0],N=V[1],Q=r.default.useState((function(){return function(t){return t}})),G=Q[0],J=Q[1],H=r.default.useState(!1),$=H[0],F=H[1],U=r.default.useState({treatment:"#bf99ba",outcome:"#f28e2c",control:"#a5c8d4"}),q=U[0];U[1],(0,r.useEffect)((function(){var t=l.filter((function(t,e){return 1===f[e]})),e=l.filter((function(t,e){return 0===f[e]})),n=p.map((function(t,e){return t[f[e]]})),r=n.filter((function(t,e){return 0===f[e]})),a=n.filter((function(t,e){return 1===f[e]})),i=r.map((function(t){return 1/t})),o=a.map((function(t){return 1/t}));t=t.map((function(t,e){return[t,o[e]]})),e=e.map((function(t,e){return[t,i[e]]})),O([].concat(t)),C([].concat(e))}),[l]),(0,r.useEffect)((function(){if(c&&g&&m){var t=c.filter((function(t,e){return 1===m[e]})),e=c.filter((function(t,e){return 0===m[e]})),n=g.map((function(t,e){return t[m[e]]})),r=n.filter((function(t,e){return 0===m[e]})),a=n.filter((function(t,e){return 1===m[e]})),i=r.map((function(t){return 1/t})),o=a.map((function(t){return 1/t}));t=t.map((function(t,e){return[t,o[e]]})),e=e.map((function(t,e){return[t,i[e]]})),D([].concat(t)),B([].concat(e))}}),[c,g,m]);var Y=(0,r.useRef)("svgCompare"),Z=a.select(Y.current).select("g");function X(t,e,n,r,i,o,u){c=(l=e).length,d=l.reduce((function(t,e){return t+e}))/c,Math.sqrt(l.map((function(t){return Math.pow(t-d,2)})).reduce((function(t,e){return t+e}))/c);var l,c,d,f,m=3.5*(t[1]-t[0]),h=function(t,e,n,r){var i=[];if(r)for(var o,u=function(){for(var e=o.value,a=n.map((function(n){return t(e-n)})),u=0,l=0,c=0;c<a.length;c++){var s=a[c],d=r[c];u+=s*d,l+=d}var f=0===l?0:u/l;i.push([e,f])},l=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e);!(o=l()).done;)u();else i=e.map((function(e){return[e,a.mean(n,(function(n){return t(e-n)}))]}));return i}((f=m,function(t){return Math.abs(t/=f)<=1?.75*(1-t*t)/f:0}),t,e,u);h=[n].concat(h).concat([r]);var p=a.line().curve(a.curveBasis).x((function(t){return i(t[0])})).y((function(t){return o(t[1])}));return p(h)}function K(t,e,n){var r=t.reduce((function(t,e){return t+e.length}),0),i=t.reduce((function(t,e){return t+a.sum(e,(function(t){return t[1]}))}),0),o=a.max(t.map((function(t){return t.length/r}))),u=a.max(t.map((function(t){return a.sum(t,(function(t){return t[1]}))/i}))),l=a.scaleLinear().range(e).domain([0,o]),c=a.scaleLinear().range(e).domain([0,u]),s=a.area().y0((function(t){return l(0)})).y1((function(t){return l(t.length/r)})).x((function(t){return n(t.x0)})).curve(a.curveCatmullRom),d=a.area().y0((function(t){return c(0)})).y1((function(t){return c(a.sum(t,(function(t){return t[1]}))/i)})).x((function(t){return n(t.x0)})).curve(a.curveCatmullRom);return{unadjusted:s(t),adjusted:d(t)}}function tt(t,e,n,r){var i=t.reduce((function(t,e){return t+e.length}),0),o=e.reduce((function(t,e){return t+e.length}),0),u=a.max(t.map((function(t){return t.length/i}))),l=a.max(e.map((function(t){return t.length/o}))),c=a.scaleLinear().range(n).domain([0,u]),s=a.scaleLinear().range(n).domain([0,l]),d=a.area().y0((function(t){return c(0)})).y1((function(t){return c(t.length/i)})).x((function(t){return r(t.x0)})).curve(a.curveCatmullRom),f=a.area().y0((function(t){return s(0)})).y1((function(t){return s(t.length/o)})).x((function(t){return r(t.x0)})).curve(a.curveCatmullRom);return{unadjusted:d(t),adjusted:f(e)}}function et(t,e){for(var n=0,r=0,a=0;a<t.length;a++){var i=t[a][0],o=e[a];n+=i*o,r+=o}return n/r}(0,r.useEffect)((function(){if(0!==M.length&&0!==A.length){var t=a.histogram().value((function(t){return t[0]})).domain([a.min(l),a.max(l)]).thresholds(30),e=t(M),r=t(A),i=a.max([a.max(e.map((function(t){return t.length})))/M.length,a.max(r.map((function(t){return t.length})))/A.length]),o=a.scaleLinear().domain([a.min(l),a.max(l)]).range([n.marginLeft,n.width-n.margin]),u=a.scaleLinear().domain([0,i]).range([n.height/2,n.height-n.margin]),c=a.scaleLinear().domain([0,i]).range([n.height/2,n.margin]);z((function(){return function(t){return o(t)}})),N((function(){return function(t){return u(t)}})),J((function(){return function(t){return c(t)}}));var s,d,m,h,g,y,v=o.ticks(15),x=[a.min(l),0],b=[a.max(l),0],j=(X(v,A,x,b,o,c),X(v,M,x,b,o,u),a.mean(A,(function(t){return t[0]}))),k=a.mean(M,(function(t){return t[0]}));if(0===P.length||0===T.length){var w=p.map((function(t,e){return t[f[e]]})),E=w.filter((function(t,e){return 0===f[e]})),O=w.filter((function(t,e){return 1===f[e]})),S=E.map((function(t){return 1/t})),C=O.map((function(t){return 1/t}));X(v,A,x,b,o,c,S),X(v,M,x,b,o,u,C);var _=K(r,[n.height/2,n.margin],o),D=K(e,[n.height/2,n.height-n.margin],o);s=_.unadjusted,m=_.adjusted,d=D.unadjusted,h=D.adjusted,g=et(A,S),y=et(M,C)}else{var L=t(P),B=tt(r,t(T),[n.height/2,n.margin],o),I=tt(e,L,[n.height/2,n.height-n.margin],o);s=B.unadjusted,m=B.adjusted,d=I.unadjusted,h=I.adjusted,g=a.mean(T,(function(t){return t[0]})),y=a.mean(P,(function(t){return t[0]}))}Z.select("#unadjusted").selectAll(".unadjustedCLine").data([s]).join("path").attr("class","unadjustedCLine").attr("fill","none").attr("stroke","#000").attr("stroke-width",1).attr("stroke-linejoin","round").attr("d",(function(t){return t})),Z.select("#adjusted").selectAll(".adjustedCLine").data([m]).join("path").attr("class","adjustedCLine").attr("fill",q.control).attr("stroke","none").attr("d",(function(t){return t})),Z.select("#unadjusted").selectAll(".unadjustedTLine").data([d]).join("path").attr("class","unadjustedTLine").attr("fill","none").attr("stroke","#000").attr("stroke-width",1).attr("stroke-linejoin","round").attr("d",(function(t){return t})),Z.select("#adjusted").selectAll(".adjustedTLine").data([h]).join("path").attr("class","adjustedTLine").attr("fill",q.treatment).attr("stroke","none").attr("d",(function(t){return t})),Z.select("#adjustedMean").selectAll(".adjustedCMeanLine").data([g]).join("line").attr("class","adjustedCMeanLine").attr("x1",(function(t){return o(t)})).attr("x2",(function(t){return o(t)})).attr("y1",n.height/2).attr("y2",n.margin-10).attr("stroke-dasharray","5 5 2 5").attr("stroke","black").attr("stroke-width",2).attr("stroke-linecap","round"),Z.select("#adjustedMean").selectAll(".adjustedTMeanLine").data([y]).join("line").attr("class","adjustedTMeanLine").attr("x1",(function(t){return o(t)})).attr("x2",(function(t){return o(t)})).attr("y1",n.height/2).attr("y2",n.height-n.margin+10).attr("stroke-dasharray","5 5 2 5").attr("stroke","black").attr("stroke-width",2).attr("stroke-linecap","round"),Z.select("#adjustedMean").selectAll(".adjustedCMean").data([g]).join("circle").attr("class","adjustedCMean").attr("cx",(function(t){return o(t)})).attr("cy",(function(t){return c(0)})).attr("r",3).attr("fill","black").attr("stroke","black"),Z.select("#adjustedMean").selectAll(".adjustedTMean").data([y]).join("circle").attr("class","adjustedTMean").attr("cx",(function(t){return o(t)})).attr("cy",(function(t){return u(0)})).attr("r",3).attr("fill","black").attr("stroke","black"),Z.select("#unadjustedMean").selectAll(".unadjustedCMeanLine").data([j]).join("line").attr("class","unadjustedCMeanLine").attr("x1",(function(t){return o(t)})).attr("x2",(function(t){return o(t)})).attr("y1",n.height/2).attr("y2",n.margin-10).attr("stroke-dasharray","5 5 2 5").attr("stroke","black").attr("opacity",.75).attr("stroke-width",1),Z.select("#unadjustedMean").selectAll(".unadjustedTMeanLine").data([k]).join("line").attr("class","unadjustedTMeanLine").attr("x1",(function(t){return o(t)})).attr("x2",(function(t){return o(t)})).attr("y1",n.height/2).attr("y2",n.height-n.margin+10).attr("stroke-dasharray","5 5 2 5").attr("stroke","black").attr("opacity",.75).attr("stroke-width",1),Z.select("#x-axis").attr("transform","translate(0, "+n.height/2+")").call(a.axisBottom(o).tickSize(3).ticks(5)),Z.select("#y-axistreatment").attr("transform","translate("+n.marginLeft+", 0)").call(a.axisLeft(u).tickSize(3).ticks(2)),Z.select("#y-axiscontrol").attr("transform","translate("+n.marginLeft+", 0)").call(a.axisLeft(c).tickSize(3).ticks(2)),a.selectAll("#x-axis>.tick>text").each((function(t,e){a.select(this).style("font-size","12px")})),a.selectAll("#y-axistreatment>.tick>text").each((function(t,e){a.select(this).style("font-size","12px")})),a.selectAll("#y-axiscontrol>.tick>text").each((function(t,e){a.select(this).style("font-size","12px")}))}}),[M,A,P,T]),(0,r.useEffect)((function(){var t=a.histogram().domain([a.min(l),a.max(l)]).thresholds(30)(b),e=0===A.length?1:A.length,n=0===M.length?1:M.length;Z.select("#selected").selectAll(".selectedBars").data(t).join("rect").attr("class","selectedBars").attr("x",(function(t,e){return W(t.x0)})).attr("y",(function(t){return k?R(0):G(t.length/e)})).attr("width",(function(t){return W(t.x1)-W(t.x0)})).attr("height",(function(t){return k?R(t.length/n)-R(0):G(0)-G(t.length/e)})).attr("fill","none").attr("stroke","black"),b.length>0?(Z.select("#unadjusted").selectAll(".unadjustedCLine").attr("opacity",.2),Z.select("#unadjusted").selectAll(".unadjustedTLine").attr("opacity",.2),Z.select("#adjusted").selectAll(".adjustedCLine").attr("opacity",.2),Z.select("#adjusted").selectAll(".adjustedTLine").attr("opacity",.2)):(Z.select("#unadjusted").selectAll(".unadjustedCLine").attr("opacity",1),Z.select("#unadjusted").selectAll(".unadjustedTLine").attr("opacity",1),Z.select("#adjusted").selectAll(".adjustedCLine").attr("opacity",1),Z.select("#adjusted").selectAll(".adjustedTLine").attr("opacity",1))}),[b]);var nt={opacity:$?1:0,cursor:"pointer"};return r.default.createElement("div",{style:{display:"flex",alignItems:"center"},onMouseOver:function(t){return t.target,void F(!0)},onMouseOut:function(t){return t.target,void F(!1)}},r.default.createElement(i.default,{style:nt,onClick:function(){w(v)},"aria-label":"delete"},r.default.createElement(o.default,null)),r.default.createElement("p",{style:{writingMode:"vertical-rl",transform:"rotate(-180deg)",fontFamily:"sans-serif",fontSize:"12px"}},v),r.default.createElement("svg",{width:n.width,height:n.height,ref:Y,id:"svgCompare"+v},r.default.createElement("g",null,r.default.createElement("g",{id:"adjusted"}),r.default.createElement("g",{id:"unadjusted"}),r.default.createElement("g",{id:"unadjustedMean"}),r.default.createElement("g",{id:"adjustedMean"}),r.default.createElement("g",{id:"selected"}),r.default.createElement("g",{id:"x-axis"}),r.default.createElement("g",{id:"y-axistreatment"}),r.default.createElement("g",{id:"y-axiscontrol"}))))}},8267:(t,e,n)=>{e.__esModule=!0,e.CompareHistogramContinuousVis=void 0;var r=c(n(6271)),a=c(n(5651)),i=u(n(4113)),o=u(n(2450));function u(t){return t&&t.__esModule?t:{default:t}}function l(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(l=function(t){return t?n:e})(t)}function c(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=l(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=a?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}e.CompareHistogramContinuousVis=function(t){var e=t.layout,n=void 0===e?{height:120,width:500,margin:20,marginLeft:30}:e,u=t.unadjustedAttribute,l=void 0===u?[]:u,c=t.adjustedAttribute,d=t.unadjustedTreatment,f=void 0===d?[]:d,m=t.unadjustedPropensity,h=void 0===m?[]:m,p=t.attribute,g=void 0===p?"":p,y=(t.updateFilter,t.selectedAttribute),v=void 0===y?[]:y,x=t.selectedTreatment,b=void 0!==x&&x,j=t.hideCovariate,k=r.default.useState([]),w=k[0],E=k[1],M=r.default.useState([]),O=M[0],S=M[1],A=r.default.useState((function(){return function(t){return t}})),C=A[0],_=A[1],P=r.default.useState((function(){return function(t){return t}})),D=P[0],L=P[1],T=r.default.useState((function(){return function(t){return t}})),B=T[0],I=T[1],W=r.default.useState(!1),z=W[0],V=W[1],R=r.default.useState({treatment:"#6c8496",outcome:"#f28e2c",control:"#a1c5c0"}),N=R[0];R[1],(0,r.useEffect)((function(){if(!c){var t=l.filter((function(t,e){return 1===f[e]})),e=l.filter((function(t,e){return 0===f[e]})),n=h.map((function(t,e){return t[f[e]]})),r=n.filter((function(t,e){return 0===f[e]})),a=n.filter((function(t,e){return 1===f[e]})),i=r.map((function(t){return 1/t})),o=a.map((function(t){return 1/t}));t=t.map((function(t,e){return[t,o[e]]})),e=e.map((function(t,e){return[t,i[e]]})),E([].concat(t)),S([].concat(e))}}),[l]);var Q=(0,r.useRef)("svgCompare"),G=a.select(Q.current).select("g");function J(t){for(var e,n=0,r=0,a=s(t);!(e=a()).done;){var i=e.value;n+=i[0]*i[1],r+=i[1]}return n/r}(0,r.useEffect)((function(){if(0!==w.length&&0!==O.length){v.length,console.log(w,O);var t=a.histogram().value((function(t){return t[0]})).domain([a.min(l),a.max(l)]).thresholds(20),e=t(w),r=t(O);t(v.map((function(t){return[0,t]}))),console.log(r,e);var i,o,u,d,f=a.mean(O,(function(t){return t[0]})),m=a.mean(w,(function(t){return t[0]})),h=O.length,p=w.length;c||(i=J(O),o=J(w),u=a.sum(O,(function(t){return t[1]})),d=a.sum(w,(function(t){return t[1]}))),a.sum(w,(function(t){return t[1]})),a.sum(O,(function(t){return t[1]}));var g=function(t,e,n,r,i,o){for(var u,l=0,c=s(t);!(u=c()).done;){var d=u.value,f=d.length/r,m=a.sum(d,(function(t){return t[1]}))/o,h=a.max([f,m]);h>l&&(l=h)}for(var p,g=s(e);!(p=g()).done;){var y=p.value,v=y.length/n,x=a.sum(y,(function(t){return t[1]}))/i,b=a.max([v,x]);b>l&&(l=b)}return l}(e,r,h,p,u,d),y=a.scaleLinear().domain([a.min(l),a.max(l)]).range([n.marginLeft,n.width-n.margin]),x=a.scaleLinear().domain([0,g]).range([n.height/2,n.height-n.margin]),b=a.scaleLinear().domain([0,g]).range([n.height/2,n.margin]);_((function(){return function(t){return y(t)}})),L((function(){return function(t){return x(t)}})),I((function(){return function(t){return b(t)}})),G.select("#unadjusted").selectAll(".unadjustedCBars").data(r).join("rect").attr("class","unadjustedCBars").attr("x",(function(t,e){return y(t.x0)})).attr("y",(function(t){return b(t.length/h)})).attr("width",(function(t){return y(t.x1)-y(t.x0)})).attr("height",(function(t){return b(0)-b(t.length/h)})).attr("fill","none").attr("stroke","black"),G.select("#unadjusted").selectAll(".unadjustedTBars").data(e).join("rect").attr("class","unadjustedTBars").attr("x",(function(t,e){return y(t.x0)})).attr("y",(function(t){return x(0)})).attr("width",(function(t){return y(t.x1)-y(t.x0)})).attr("height",(function(t){return x(t.length/p)-x(0)})).attr("fill","none").attr("stroke","black"),G.select("#adjusted").selectAll(".adjustedCBars").data(r).join("rect").attr("class","adjustedCBars").attr("x",(function(t,e){return y(t.x0)})).attr("y",(function(t){return b(a.sum(t,(function(t){return t[1]}))/u)})).attr("width",(function(t){return y(t.x1)-y(t.x0)})).attr("height",(function(t){return b(0)-b(a.sum(t,(function(t){return t[1]}))/u)})).attr("fill",N.control).attr("stroke","none"),G.select("#adjusted").selectAll(".adjustedTBars").data(e).join("rect").attr("class","adjustedTBars").attr("x",(function(t,e){return y(t.x0)})).attr("y",(function(t){return x(0)})).attr("width",(function(t){return y(t.x1)-y(t.x0)})).attr("height",(function(t){return x(a.sum(t,(function(t){return t[1]}))/d)-x(0)})).attr("fill",N.treatment).attr("stroke","none"),G.select("#adjustedMean").selectAll(".adjustedCMeanLine").data([i]).join("line").attr("class","adjustedCMeanLine").attr("x1",(function(t){return y(t)})).attr("x2",(function(t){return y(t)})).attr("y1",n.height/2).attr("y2",n.margin-10).attr("stroke-dasharray","5 5 2 5").attr("stroke","black").attr("stroke-width",2).attr("stroke-linecap","round"),G.select("#adjustedMean").selectAll(".adjustedTMeanLine").data([o]).join("line").attr("class","adjustedTMeanLine").attr("x1",(function(t){return y(t)})).attr("x2",(function(t){return y(t)})).attr("y1",n.height/2).attr("y2",n.height-n.margin+10).attr("stroke-dasharray","5 5 2 5").attr("stroke","black").attr("stroke-width",2).attr("stroke-linecap","round"),G.select("#adjustedMean").selectAll(".adjustedCMean").data([i]).join("circle").attr("class","adjustedCMean").attr("cx",(function(t){return y(t)})).attr("cy",(function(t){return b(0)})).attr("r",3).attr("fill","black").attr("stroke","black"),G.select("#adjustedMean").selectAll(".adjustedTMean").data([o]).join("circle").attr("class","adjustedTMean").attr("cx",(function(t){return y(t)})).attr("cy",(function(t){return x(0)})).attr("r",3).attr("fill","black").attr("stroke","black"),G.select("#unadjustedMean").selectAll(".unadjustedCMeanLine").data([f]).join("line").attr("class","unadjustedCMeanLine").attr("x1",(function(t){return y(t)})).attr("x2",(function(t){return y(t)})).attr("y1",n.height/2).attr("y2",n.margin-10).attr("stroke-dasharray","5 5 2 5").attr("stroke","black").attr("opacity",.75).attr("stroke-width",1),G.select("#unadjustedMean").selectAll(".unadjustedTMeanLine").data([m]).join("line").attr("class","unadjustedTMeanLine").attr("x1",(function(t){return y(t)})).attr("x2",(function(t){return y(t)})).attr("y1",n.height/2).attr("y2",n.height-n.margin+10).attr("stroke-dasharray","5 5 2 5").attr("stroke","black").attr("opacity",.75).attr("stroke-width",1),G.select("#x-axis").attr("transform","translate(0, "+n.height/2+")").call(a.axisBottom(y).tickSize(3).tickValues([0,1]).tickFormat(a.format(".0f"))),G.select("#y-axistreatment").attr("transform","translate("+n.marginLeft+", 0)").call(a.axisLeft(x).tickSize(3).ticks(2)),G.select("#y-axiscontrol").attr("transform","translate("+n.marginLeft+", 0)").call(a.axisLeft(b).tickSize(3).ticks(2)),a.selectAll("#x-axis>.tick>text").each((function(t,e){a.select(this).style("font-size","12px")})),a.selectAll("#y-axistreatment>.tick>text").each((function(t,e){a.select(this).style("font-size","12px")})),a.selectAll("#y-axiscontrol>.tick>text").each((function(t,e){a.select(this).style("font-size","12px")}))}}),[w,O]),(0,r.useEffect)((function(){var t=a.histogram().domain([-.5,1.5]).thresholds(20)(v),e=(n.width-n.margin-n.marginLeft)/2;G.select("#selected").selectAll(".selectedBars").data(t).join("rect").attr("class","selectedBars").attr("x",(function(t,n){return C(t.x0)-e/2})).attr("y",(function(t){return b?D(0):B(t.length/O.length)})).attr("width",(function(t){return e})).attr("height",(function(t){return b?D(t.length/w.length)-D(0):B(0)-B(t.length/O.length)})).attr("fill","none").attr("stroke","black"),v.length>0?(G.select("#unadjusted").selectAll(".unadjustedCBars").attr("opacity",.2),G.select("#unadjusted").selectAll(".unadjustedTBars").attr("opacity",.2),G.select("#adjusted").selectAll(".adjustedCBars").attr("opacity",.2),G.select("#adjusted").selectAll(".adjustedTBars").attr("opacity",.2)):(G.select("#unadjusted").selectAll(".unadjustedCBars").attr("opacity",1),G.select("#unadjusted").selectAll(".unadjustedTBars").attr("opacity",1),G.select("#adjusted").selectAll(".adjustedCBars").attr("opacity",1),G.select("#adjusted").selectAll(".adjustedTBars").attr("opacity",1))}),[v]);var H={opacity:z?1:0,cursor:"pointer"};return r.default.createElement("div",{style:{display:"flex",alignItems:"center"},onMouseOver:function(t){return t.target,void V(!0)},onMouseOut:function(t){return t.target,void V(!1)}},r.default.createElement(i.default,{style:H,onClick:function(){j(g)},"aria-label":"delete"},r.default.createElement(o.default,null)),r.default.createElement("p",{style:{writingMode:"vertical-rl",transform:"rotate(-180deg)",fontFamily:"sans-serif",fontSize:"12px"}},g),r.default.createElement("svg",{width:n.width,height:n.height,ref:Q,id:"svgCompare"+g},r.default.createElement("g",null,r.default.createElement("g",{id:"adjusted"}),r.default.createElement("g",{id:"unadjusted"}),r.default.createElement("g",{id:"unadjustedMean"}),r.default.createElement("g",{id:"adjustedMean"}),r.default.createElement("g",{id:"selected"}),r.default.createElement("g",{id:"x-axis"}),r.default.createElement("g",{id:"y-axistreatment"}),r.default.createElement("g",{id:"y-axiscontrol"}))))}},7930:(t,e,n)=>{e.__esModule=!0,e.CompareHistogramVis=void 0;var r=c(n(6271)),a=c(n(5651)),i=u(n(4113)),o=u(n(2450));function u(t){return t&&t.__esModule?t:{default:t}}function l(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(l=function(t){return t?n:e})(t)}function c(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=l(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=a?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}e.CompareHistogramVis=function(t){var e=t.layout,n=void 0===e?{height:120,width:500,margin:20,marginLeft:30}:e,u=t.unadjustedAttribute,l=void 0===u?[]:u,c=t.adjustedAttribute,d=t.unadjustedTreatment,f=void 0===d?[]:d,m=t.adjustedTreatment,h=t.unadjustedPropensity,p=void 0===h?[]:h,g=t.adjustedPropensity,y=t.attribute,v=void 0===y?"":y,x=(t.updateFilter,t.selectedAttribute),b=void 0===x?[]:x,j=t.selectedTreatment,k=void 0!==j&&j,w=t.hideCovariate,E=r.default.useState([]),M=E[0],O=E[1],S=r.default.useState([]),A=S[0],C=S[1],_=r.default.useState([]),P=_[0],D=_[1],L=r.default.useState([]),T=L[0],B=L[1],I=r.default.useState((function(){return function(t){return t}})),W=I[0],z=I[1],V=r.default.useState((function(){return function(t){return t}})),R=V[0],N=V[1],Q=r.default.useState((function(){return function(t){return t}})),G=Q[0],J=Q[1],H=r.default.useState(!1),$=H[0],F=H[1],U=r.default.useState({treatment:"#bf99ba",outcome:"#f28e2c",control:"#a5c8d4"}),q=U[0];U[1],(0,r.useEffect)((function(){var t=l.filter((function(t,e){return 1===f[e]})),e=l.filter((function(t,e){return 0===f[e]})),n=p.map((function(t,e){return t[f[e]]})),r=n.filter((function(t,e){return 0===f[e]})),a=n.filter((function(t,e){return 1===f[e]})),i=r.map((function(t){return 1/t})),o=a.map((function(t){return 1/t}));t=t.map((function(t,e){return[t,o[e]]})),e=e.map((function(t,e){return[t,i[e]]})),O([].concat(t)),C([].concat(e))}),[l]),(0,r.useEffect)((function(){if(c&&g&&m){var t=c.filter((function(t,e){return 1===m[e]})),e=c.filter((function(t,e){return 0===m[e]})),n=g.map((function(t,e){return t[m[e]]})),r=n.filter((function(t,e){return 0===m[e]})),a=n.filter((function(t,e){return 1===m[e]})),i=r.map((function(t){return 1/t})),o=a.map((function(t){return 1/t}));t=t.map((function(t,e){return[t,o[e]]})),e=e.map((function(t,e){return[t,i[e]]})),D([].concat(t)),B([].concat(e))}}),[c,g,m]);var Y=(0,r.useRef)("svgCompare"),Z=a.select(Y.current).select("g");function X(t){for(var e,n=0,r=0,a=s(t);!(e=a()).done;){var i=e.value;n+=i[0]*i[1],r+=i[1]}return n/r}(0,r.useEffect)((function(){if(0!==M.length&&0!==A.length){b.length;var t,e,r,i,o,u,l,c,d,f,m=a.histogram().value((function(t){return t[0]})).domain([-.5,1.5]).thresholds(2),h=m(M),p=m(A),g=(m(b.map((function(t){return[0,t]}))),a.mean(A,(function(t){return t[0]}))),y=a.mean(M,(function(t){return t[0]})),v=A.length,x=M.length;0===P.length||0===T.length?(t=X(A),e=X(M),r=a.sum(A,(function(t){return t[1]})),i=a.sum(M,(function(t){return t[1]})),f=function(t,e,n,r,i,o){for(var u,l=0,c=s(t);!(u=c()).done;){var d=u.value,f=d.length/r,m=a.sum(d,(function(t){return t[1]}))/o,h=a.max([f,m]);h>l&&(l=h)}for(var p,g=s(e);!(p=g()).done;){var y=p.value,v=y.length/n,x=a.sum(y,(function(t){return t[1]}))/i,b=a.max([v,x]);b>l&&(l=b)}return l}(h,p,v,x,r,i),o=a.scaleLinear().domain([-.5,1.5]).range([n.marginLeft,n.width-n.margin]),u=a.scaleLinear().domain([0,f]).range([n.height/2,n.height-n.margin]),l=a.scaleLinear().domain([0,f]).range([n.height/2,n.margin]),z((function(){return function(t){return o(t)}})),N((function(){return function(t){return u(t)}})),J((function(){return function(t){return l(t)}}))):(t=a.mean(T,(function(t){return t[0]})),e=a.mean(P,(function(t){return t[0]})),r=T.length,i=P.length,c=m(T),f=function(t,e,n,r,i,o,u,l){var c=a.max(t.map((function(t){return t.length/o}))),s=a.max(e.map((function(t){return t.length/i}))),d=a.max(n.map((function(t){return t.length/l}))),f=a.max(r.map((function(t){return t.length/u})));return a.max([c,s,d,f])}(h,p,d=m(P),c,v,x,r,i),o=a.scaleLinear().domain([-.5,1.5]).range([n.marginLeft,n.width-n.margin]),u=a.scaleLinear().domain([0,f]).range([n.height/2,n.height-n.margin]),l=a.scaleLinear().domain([0,f]).range([n.height/2,n.margin]),z((function(){return function(t){return o(t)}})),N((function(){return function(t){return u(t)}})),J((function(){return function(t){return l(t)}})));var j=(n.width-n.margin-n.marginLeft)/2;Z.select("#unadjusted").selectAll(".unadjustedCBars").data(p).join("rect").attr("class","unadjustedCBars").attr("x",(function(t,e){return o(t.x0)-j/2})).attr("y",(function(t){return l(t.length/v)})).attr("width",(function(t){return j})).attr("height",(function(t){return l(0)-l(t.length/v)})).attr("fill","none").attr("stroke","black"),Z.select("#unadjusted").selectAll(".unadjustedTBars").data(h).join("rect").attr("class","unadjustedTBars").attr("x",(function(t,e){return o(t.x0)-j/2})).attr("y",(function(t){return u(0)})).attr("width",j).attr("height",(function(t){return u(t.length/x)-u(0)})).attr("fill","none").attr("stroke","black"),0===P.length||0===T.length?(Z.select("#adjusted").selectAll(".adjustedCBars").data(p).join("rect").attr("class","adjustedCBars").attr("x",(function(t,e){return o(t.x0)-j/2})).attr("y",(function(t){return l(a.sum(t,(function(t){return t[1]}))/r)})).attr("width",j).attr("height",(function(t){return l(0)-l(a.sum(t,(function(t){return t[1]}))/r)})).attr("fill",q.control).attr("stroke","none"),Z.select("#adjusted").selectAll(".adjustedTBars").data(h).join("rect").attr("class","adjustedTBars").attr("x",(function(t,e){return o(t.x0)-j/2})).attr("y",(function(t){return u(0)})).attr("width",j).attr("height",(function(t){return u(a.sum(t,(function(t){return t[1]}))/i)-u(0)})).attr("fill",q.treatment).attr("stroke","none")):(Z.select("#adjusted").selectAll(".adjustedCBars").data(c).join("rect").attr("class","adjustedCBars").attr("x",(function(t,e){return o(t.x0)-j/2})).attr("y",(function(t){return l(t.length/r)})).attr("width",j).attr("height",(function(t){return l(0)-l(t.length/r)})).attr("fill",q.control).attr("stroke","none"),Z.select("#adjusted").selectAll(".adjustedTBars").data(d).join("rect").attr("class","adjustedTBars").attr("x",(function(t,e){return o(t.x0)-j/2})).attr("y",(function(t){return u(0)})).attr("width",j).attr("height",(function(t){return u(t.length/i)-u(0)})).attr("fill",q.treatment).attr("stroke","none")),Z.select("#adjustedMean").selectAll(".adjustedCMeanLine").data([t]).join("line").attr("class","adjustedCMeanLine").attr("x1",(function(t){return o(t)})).attr("x2",(function(t){return o(t)})).attr("y1",n.height/2).attr("y2",n.margin-10).attr("stroke-dasharray","5 5 2 5").attr("stroke","black").attr("stroke-width",2).attr("stroke-linecap","round"),Z.select("#adjustedMean").selectAll(".adjustedTMeanLine").data([e]).join("line").attr("class","adjustedTMeanLine").attr("x1",(function(t){return o(t)})).attr("x2",(function(t){return o(t)})).attr("y1",n.height/2).attr("y2",n.height-n.margin+10).attr("stroke-dasharray","5 5 2 5").attr("stroke","black").attr("stroke-width",2).attr("stroke-linecap","round"),Z.select("#adjustedMean").selectAll(".adjustedCMean").data([t]).join("circle").attr("class","adjustedCMean").attr("cx",(function(t){return o(t)})).attr("cy",(function(t){return l(0)})).attr("r",3).attr("fill","black").attr("stroke","black"),Z.select("#adjustedMean").selectAll(".adjustedTMean").data([e]).join("circle").attr("class","adjustedTMean").attr("cx",(function(t){return o(t)})).attr("cy",(function(t){return u(0)})).attr("r",3).attr("fill","black").attr("stroke","black"),Z.select("#unadjustedMean").selectAll(".unadjustedCMeanLine").data([g]).join("line").attr("class","unadjustedCMeanLine").attr("x1",(function(t){return o(t)})).attr("x2",(function(t){return o(t)})).attr("y1",n.height/2).attr("y2",n.margin-10).attr("stroke-dasharray","5 5 2 5").attr("stroke","black").attr("opacity",.75).attr("stroke-width",1),Z.select("#unadjustedMean").selectAll(".unadjustedTMeanLine").data([y]).join("line").attr("class","unadjustedTMeanLine").attr("x1",(function(t){return o(t)})).attr("x2",(function(t){return o(t)})).attr("y1",n.height/2).attr("y2",n.height-n.margin+10).attr("stroke-dasharray","5 5 2 5").attr("stroke","black").attr("opacity",.75).attr("stroke-width",1),Z.select("#x-axis").attr("transform","translate(0, "+n.height/2+")").call(a.axisBottom(o).tickSize(3).tickValues([0,1]).tickFormat(a.format(".0f"))),Z.select("#y-axistreatment").attr("transform","translate("+n.marginLeft+", 0)").call(a.axisLeft(u).tickSize(3).ticks(2)),Z.select("#y-axiscontrol").attr("transform","translate("+n.marginLeft+", 0)").call(a.axisLeft(l).tickSize(3).ticks(2)),a.selectAll("#x-axis>.tick>text").each((function(t,e){a.select(this).style("font-size","12px")})),a.selectAll("#y-axistreatment>.tick>text").each((function(t,e){a.select(this).style("font-size","12px")})),a.selectAll("#y-axiscontrol>.tick>text").each((function(t,e){a.select(this).style("font-size","12px")}))}}),[M,A,P,T]),(0,r.useEffect)((function(){var t=a.histogram().domain([-.5,1.5]).thresholds(2)(b),e=(n.width-n.margin-n.marginLeft)/2;Z.select("#selected").selectAll(".selectedBars").data(t).join("rect").attr("class","selectedBars").attr("x",(function(t,n){return W(t.x0)-e/2})).attr("y",(function(t){return k?R(0):G(t.length/A.length)})).attr("width",(function(t){return e})).attr("height",(function(t){return k?R(t.length/M.length)-R(0):G(0)-G(t.length/A.length)})).attr("fill","none").attr("stroke","black"),b.length>0?(Z.select("#unadjusted").selectAll(".unadjustedCBars").attr("opacity",.2),Z.select("#unadjusted").selectAll(".unadjustedTBars").attr("opacity",.2),Z.select("#adjusted").selectAll(".adjustedCBars").attr("opacity",.2),Z.select("#adjusted").selectAll(".adjustedTBars").attr("opacity",.2)):(Z.select("#unadjusted").selectAll(".unadjustedCBars").attr("opacity",1),Z.select("#unadjusted").selectAll(".unadjustedTBars").attr("opacity",1),Z.select("#adjusted").selectAll(".adjustedCBars").attr("opacity",1),Z.select("#adjusted").selectAll(".adjustedTBars").attr("opacity",1))}),[b]);var K={opacity:$?1:0,cursor:"pointer"};return r.default.createElement("div",{style:{display:"flex",alignItems:"center"},onMouseOver:function(t){return t.target,void F(!0)},onMouseOut:function(t){return t.target,void F(!1)}},r.default.createElement(i.default,{style:K,onClick:function(){w(v)},"aria-label":"delete"},r.default.createElement(o.default,null)),r.default.createElement("p",{style:{writingMode:"vertical-rl",transform:"rotate(-180deg)",fontFamily:"sans-serif",fontSize:"12px"}},v),r.default.createElement("svg",{width:n.width,height:n.height,ref:Y,id:"svgCompare"+v},r.default.createElement("g",null,r.default.createElement("g",{id:"adjusted"}),r.default.createElement("g",{id:"unadjusted"}),r.default.createElement("g",{id:"unadjustedMean"}),r.default.createElement("g",{id:"adjustedMean"}),r.default.createElement("g",{id:"selected"}),r.default.createElement("g",{id:"x-axis"}),r.default.createElement("g",{id:"y-axistreatment"}),r.default.createElement("g",{id:"y-axiscontrol"}))))}},9579:(t,e,n)=>{e.__esModule=!0,e.CovariateBalance=void 0;var r=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=p(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=a?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}(n(6271)),a=n(6680),i=n(4946),o=n(8613),u=n(7930),l=(n(8267),n(3790)),c=n(788),s=h(n(7382)),d=h(n(7128)),f=h(n(2558)),m=h(n(7774));function h(t){return t&&t.__esModule?t:{default:t}}function p(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(p=function(t){return t?n:e})(t)}function g(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}e.CovariateBalance=function(t){var e=t.unadjustedCohortData,n=void 0===e?{}:e,h=t.adjustedCohortData,p=t.attributes,y=void 0===p?[]:p,v=(t.weights,t.updateFilter),x=t.selected,b=void 0===x?[]:x,j=r.default.useState(),k=(j[0],j[1],r.default.useState({})),w=k[0],E=k[1],M=r.default.useState([]),O=M[0],S=M[1],A=r.default.useState([0,1]),C=A[0],_=A[1],P=r.default.useState(!1),D=P[0],L=P[1],T=r.default.useState([]),B=T[0],I=T[1],W=r.default.useState(!1),z=W[0],V=W[1],R=r.default.useState("Adjusted High to Low"),N=R[0],Q=R[1],G=r.default.useState(!1),J=G[0],H=G[1];function $(t){var e=B.indexOf(t);B.splice(e,1),I([].concat(B)),V(!0)}function F(){H(!0)}function U(t,e){for(var n=0,r=0,a=0;a<t.length;a++){var i=t[a],o="number"==typeof e?e:e[a];n+=i*o,r+=o}return n/r}function q(t,e){for(var n=t.reduce((function(t,e){return t+e}),0)/t.length,r=0,a=0;a<t.length;a++){var i=t[a];r+=Math.pow(i-n,2)}return r/t.length}function Y(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r=1);var a=U(t,n),i=q(t),o=U(e,r),u=q(e);return(a-o)/Math.sqrt(i+u)}function Z(t,e,n,r,a){for(var i,o=[],u=function(){var u=i.value,l=t.map((function(t){return t[u]})),c=Y(l.filter((function(t,e){return 1===r[e]})),l.filter((function(t,e){return 0===r[e]}))),s=void 0;if(e){var d=e.map((function(t){return t[u]}));s=Y(d.filter((function(t,e){return 1===a[e]})),d.filter((function(t,e){return 0===a[e]})))}else s=Y(l.filter((function(t,e){return 1===r[e]})),l.filter((function(t,e){return 0===r[e]})),n.filter((function(t,e){return 1===r[e]})),n.filter((function(t,e){return 0===r[e]})));o.push({covariate:u,unadjusted:Math.abs(c),adjusted:Math.abs(s)})},l=g(y);!(i=l()).done;)u();return o}(0,r.useEffect)((function(){if(n.confounds&&0!==n.confounds.length){var t=[],e=n.treatment,r=n.confounds,a=n.propensity;if(h){var o=h.confounds,u=h.treatment;t=Z(r,o,null,e,u)}else{var l=a.map((function(t,n){return t[e[n]]})).map((function(t){return 1/t}));t=Z(r,null,l,e,null)}for(var c,s={},d=function(){var t=c.value,e=r.map((function(e){return e[t]}));s[t]=Array.from(new Set(e))},f=g(y);!(c=f()).done;)d();E(s);var m=t.sort((function(t,e){return e.adjusted-t.adjusted}));S(m);var p=m.filter((function(t){return t.adjusted>.1}));I(p.map((function(t){return t.covariate})));var v=[Math.min((0,i.min)(t,(function(t){return t.unadjusted})),(0,i.min)(t,(function(t){return t.adjusted}))),Math.max((0,i.max)(t,(function(t){return t.unadjusted})),(0,i.max)(t,(function(t){return t.adjusted})))];_(v)}}),[n,h]),(0,r.useEffect)((function(){var t;"Adjusted High to Low"===N?t=O.sort((function(t,e){return e.adjusted-t.adjusted})):"Adjusted Low to High"===N?t=O.sort((function(t,e){return t.adjusted-e.adjusted})):"Unadjusted High to Low"===N?t=O.sort((function(t,e){return e.unadjusted-t.unadjusted})):"Unadjusted Low to High"===N?t=O.sort((function(t,e){return t.unadjusted-e.unadjusted})):"Difference High to Low"===N?t=O.sort((function(t,e){return Math.abs(e.unadjusted-e.adjusted)-Math.abs(t.unadjusted-t.adjusted)})):"Difference Low to High"===N?t=O.sort((function(t,e){return Math.abs(t.unadjusted-t.adjusted)-Math.abs(e.unadjusted-e.adjusted)})):"A-Z Alphebatically"===N?t=O.sort((function(t,e){return t.covariate>e.covariate?1:-1})):"Z-A Alphebatically"===N&&(t=O.sort((function(t,e){return e.covariate>t.covariate?1:-1}))),S([].concat(t))}),[N]);var X={height:D?"0px":"auto",overflow:"hidden",display:"flex"},K={minWidth:"600px",marginTop:"30px",flexDirection:"column",height:D?"420px":"0px",overflow:"scroll"},tt={fontFamily:"sans-serif",fontSize:"11px",marginLeft:"auto"},et={color:"steelblue",cursor:"pointer"};return r.default.createElement("div",null,r.default.createElement("div",{style:{display:"flex",alignItems:"center"}},r.default.createElement(l.CovariateSelector,{open:J,handleClose:function(){return H(!1)},attributes:y,addedAttributes:B,groupEditCovariate:function(t){I(Array.from(t)),V(!0)}}),r.default.createElement(m.default,{value:D?"expand":"collapse",exclusive:!0,onChange:function(t,e){return function(t,e){if("collapse"===e)L(!1);else{if("expand"!==e)return;L(!0)}}(0,e)},"aria-label":"text alignment"},r.default.createElement(f.default,{value:"collapse","aria-label":"left aligned"},r.default.createElement(s.default,null)),r.default.createElement(f.default,{value:"expand","aria-label":"centered"},r.default.createElement(d.default,null))),z&&D?r.default.createElement("p",{style:tt},r.default.createElement("span",{style:et,onClick:function(){return F()}},r.default.createElement("u",null,"Show/Hide covariates."))):D?r.default.createElement("p",{style:tt},r.default.createElement("span",{style:{verticalAlign:"sub"}},"*")," only showing covariate details for SMD > 0.1. ",r.default.createElement("span",{style:et,onClick:function(){return F()}},r.default.createElement("u",null,"Show/Hide covariates."))):r.default.createElement("p",null)),r.default.createElement("div",null,r.default.createElement("div",{style:X},r.default.createElement(a.SMDVis,{SMDDataset:O,SMDExtent:C}),r.default.createElement(c.SMDMenu,{setSort:Q})),r.default.createElement("div",{style:K},B.map((function(t,e){return w[t]&&2===w[t].length?r.default.createElement(u.CompareHistogramVis,{key:t,unadjustedAttribute:n.confounds.map((function(e){return e[t]})),adjustedAttribute:h?h.confounds.map((function(e){return e[t]})):null,unadjustedTreatment:n.treatment,adjustedTreatment:h?h.treatment:null,unadjustedPropensity:n.propensity,adjustedPropensity:h?h.propensity:null,attribute:t,updateFilter:v,selectedAttribute:b.selectedData.map((function(e){return e[t]})),selectedTreatment:b.treatment,hideCovariate:$}):r.default.createElement(o.CompareDistributionVis,{key:t,unadjustedAttribute:n.confounds.map((function(e){return e[t]})),adjustedAttribute:h?h.confounds.map((function(e){return e[t]})):null,unadjustedTreatment:n.treatment,adjustedTreatment:h?h.treatment:null,unadjustedPropensity:n.propensity,adjustedPropensity:h?h.propensity:null,attribute:t,updateFilter:v,selectedAttribute:b.selectedData.map((function(e){return e[t]})),selectedTreatment:b.treatment,hideCovariate:$})})))))}},3790:(t,e,n)=>{e.__esModule=!0,e.CovariateSelector=void 0;var r=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=h(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=a?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}(n(6271)),a=m(n(2093)),i=m(n(3446)),o=m(n(4146)),u=m(n(5641)),l=m(n(6202)),c=m(n(3700)),s=(m(n(9071)),m(n(881)),m(n(2154))),d=m(n(3163)),f=m(n(7424));function m(t){return t&&t.__esModule?t:{default:t}}function h(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(h=function(t){return t?n:e})(t)}m(n(3332)),e.CovariateSelector=function(t){var e=t.open,n=void 0!==e&&e,m=t.handleClose,h=t.attributes,p=t.addedAttributes,g=t.groupEditCovariate,y=r.default.useState(""),v=(y[0],y[1],r.default.useState(new Set)),x=v[0],b=v[1];return(0,r.useEffect)((function(){b(new Set(p))}),[p]),r.default.createElement("div",null,r.default.createElement(o.default,{open:n,onClose:m},r.default.createElement(l.default,null,r.default.createElement(c.default,null,"Show/Hide Covariates"),r.default.createElement(s.default,{sx:{m:3},component:"fieldset",variant:"standard"},r.default.createElement(d.default,null,h.map((function(t,e){return r.default.createElement(f.default,{key:"attr-selector-"+t,control:r.default.createElement(i.default,{checked:x.has(t),onChange:function(){return function(t){var e=new Set(x);e.has(t)?e.delete(t):e.add(t),b(new Set(e))}(t)},name:t}),label:t})}))))),r.default.createElement(u.default,null,r.default.createElement(a.default,{onClick:function(){return m()}},"Cancel"),r.default.createElement(a.default,{onClick:function(){return g(x),void m()}},"Confirm"))))}},3681:(t,e,n)=>{e.__esModule=!0,e.DownloadSelectedDialog=void 0;var r=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=b(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=a?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}(n(6271)),a=x(n(2093)),i=x(n(4146)),o=x(n(5641)),u=x(n(6202)),l=x(n(3700)),c=x(n(9071)),s=x(n(1900)),d=x(n(423)),f=x(n(6404)),m=x(n(7057)),h=x(n(7611)),p=x(n(7040)),g=x(n(3332)),y=x(n(9376)),v=n(5243);function x(t){return t&&t.__esModule?t:{default:t}}function b(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(b=function(t){return t?n:e})(t)}e.DownloadSelectedDialog=function(t){var e=t.open,n=void 0!==e&&e,x=t.handleDownloadClose,b=t.selectedItems,j=r.default.useState([]),k=j[0],w=j[1],E=r.default.useState([]),M=E[0],O=E[1],S=r.default.useState("selected"),A=S[0],C=S[1];function _(t){C(t.target.value)}(0,r.useEffect)((function(){if(b.confounds.length>0){var t=Object.keys(b.confounds[0]),e=JSON.parse(JSON.stringify(b.confounds));e=e.map((function(t,e){return t.propensity=b.propensity[e],t.treatment=b.treatment[e],t})),w([].concat(t,["propensity","treatment"])),O(e)}else w([]),O([])}),[b]);var P={marginBottom:"24px"};return r.default.createElement("div",null,r.default.createElement(i.default,{open:n,onClose:x,maxWidth:"lg"},r.default.createElement(c.default,null,"Download"),r.default.createElement(u.default,null,M.length>0&&M.length<1e3?r.default.createElement("div",null,r.default.createElement(g.default,{style:P,defaultValue:A,id:"outlined-basic",label:"Filename",variant:"standard",onChange:function(t){return _(t)}}),r.default.createElement(l.default,{style:{marginBottom:"16px"}},"The following data items will be downloaded as ",r.default.createElement("i",null,A,".json"),"."),r.default.createElement(m.default,{component:y.default},r.default.createElement(s.default,{sx:{minWidth:650},"aria-label":"simple table",size:"small"},r.default.createElement(h.default,null,r.default.createElement(p.default,null,k.map((function(t,e){return r.default.createElement(f.default,{key:"header"+e,component:"th",scope:"row"},t)})))),r.default.createElement(d.default,null,M.map((function(t,e){return r.default.createElement(p.default,{key:e,sx:{"&:last-child td, &:last-child th":{border:0}}},k.map((function(e){return r.default.createElement(f.default,{component:"th",scope:"row"},t[e])})))})))))):M.length>1e3?r.default.createElement("div",null,r.default.createElement(g.default,{style:P,defaultValue:A,id:"outlined-basic",label:"Filename",variant:"standard",onChange:function(t){return _(t)}}),r.default.createElement(l.default,null,"File size too large for preview. Selected data items will be downloaded as ",r.default.createElement("i",null,A,".json"),".")):r.default.createElement(l.default,null,"Select items from the propensity score plot to download.")),r.default.createElement(o.default,null,r.default.createElement(a.default,{onClick:x},"Close"),b.confounds.length>0?r.default.createElement(a.default,{onClick:function(){var t=new Blob([JSON.stringify(M,null,4)],{type:"application/json",name:A+".json"});(0,v.saveAs)(t,A+".json"),x()}},"Download"):null)))}},1439:(t,e,n)=>{e.__esModule=!0,e.PropDistribution=void 0;var r=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=u(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=a?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}(n(6271)),a=n(4946),i=n(8582),o=n(3681);function u(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(u=function(t){return t?n:e})(t)}e.PropDistribution=function(t){var e=t.unadjustedCohortData,n=void 0===e?{}:e,u=t.adjustedCohortData,l=(t.setSelected,t._selection),c=t._iselection,s=r.default.useState({TBins:[],CBins:[]}),d=s[0],f=s[1],m=r.default.useState({TBins:1,CBins:1}),h=m[0],p=m[1],g=r.default.useState(null),y=(g[0],g[1]),v=r.default.useState({confounds:[],propensity:[],treatment:[]}),x=v[0],b=v[1],j=r.default.useState({confounds:[],propensity:[],treatment:[]}),k=(j[0],j[1],r.default.useState(!1)),w=k[0],E=k[1];function M(t,e){var n,r=document.getElementById(l),a=document.getElementById(c);r&&(r.value=JSON.stringify(t),(n=document.createEvent("HTMLEvents")).initEvent("input",!1,!0),r.dispatchEvent(n)),a&&(a.value=JSON.stringify(e),(n=document.createEvent("HTMLEvents")).initEvent("input",!1,!0),a.dispatchEvent(n))}return n.propensity&&n.propensity.length,(0,r.useEffect)((function(){if(!u&&n.confounds){for(var t=[],e=[],r=0;r<n.confounds.length;r++){var i=JSON.parse(JSON.stringify(n.confounds[r]));0===n.treatment[r]?(i.propensity=n.propensity[r][1],e.push(i)):(i.propensity=n.propensity[r][1],t.push(i))}var o=(y=(0,a.histogram)().value((function(t){return t.propensity})).domain([0,1]).thresholds(20))(t),l=y(e),c=o.reduce((function(t,e){return t+e.length}),0),s=l.reduce((function(t,e){return t+e.length}),0);f({TBins:o,CBins:l}),p({TBins:0===c?1:c,CBins:0===s?1:s})}else if(u.confounds){for(var d=[],m=[],h=0;h<u.confounds.length;h++){var g=JSON.parse(JSON.stringify(u.confounds[h]));0===u.treatment[h]?(g.propensity=u.propensity[h][1],m.push(g)):(g.propensity=u.propensity[h][1],d.push(g))}var y;o=(y=(0,a.histogram)().value((function(t){return t.propensity})).domain([0,1]).thresholds(20))(d),l=y(m),c=o.reduce((function(t,e){return t+e.length}),0),s=l.reduce((function(t,e){return t+e.length}),0),f({TBins:o,CBins:l}),p({TBins:0===c?1:c,CBins:0===s?1:s})}}),[n,u]),r.default.createElement("div",{style:{marginTop:"0px"}},r.default.createElement(o.DownloadSelectedDialog,{open:w,handleDownloadClose:function(){E(!1)},selectedItems:x}),r.default.createElement("p",{style:{height:"48px",margin:"0px",display:"flex",alignItems:"center",fontFamily:"sans-serif",fontSize:"11px"}},""+x.confounds.length," selected.",r.default.createElement("span",{style:{color:"steelblue",cursor:"pointer"},onClick:function(){return E(!0)}},r.default.createElement("u",null,"Download."))),r.default.createElement(i.PropDistributionVis,{bins:d,n:h,setSelectRange:function(t){y(t);var e={confounds:[],propensity:[],treatment:[]},r={confounds:[],propensity:[],treatment:[]};if(t)if(u){for(var a=0;a<u.confounds.length;a++){u.treatment[a];var i=u.propensity[a][1];i>=t[0]&&i<=t[1]?(e.confounds.push(u.confounds[a]),e.propensity.push(i),e.treatment.push(u.treatment[a])):(r.confounds.push(u.confounds[a]),r.propensity.push(i),r.treatment.push(u.treatment[a]))}b(e),M(e,r)}else{for(var o=0;o<n.confounds.length;o++){n.treatment[o];var l=n.propensity[o][1];l>=t[0]&&l<=t[1]?(e.confounds.push(n.confounds[o]),e.propensity.push(l),e.treatment.push(n.treatment[o])):(r.confounds.push(n.confounds[o]),r.propensity.push(l),r.treatment.push(n.treatment[o]))}b(e),M(e,r)}else b(e),M(e,n)}}))}},8582:(t,e,n)=>{e.__esModule=!0,e.PropDistributionVis=void 0;var r=o(n(6271)),a=o(n(5651));function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(i=function(t){return t?n:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=i(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var u=a?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}e.PropDistributionVis=function(t){var e=t.layout,n=void 0===e?{height:500,width:500,margin:50,marginLeft:50}:e,i=t.bins,o=void 0===i?{}:i,u=t.n,l=void 0===u?{}:u,c=t.maxPropensity,s=void 0===c?1:c,d=t.setSelectRange,f=r.default.useState({treatment:"#bf99ba",outcome:"#f28e2c",control:"#a5c8d4"}),m=f[0],h=(f[1],r.default.useState(null)),p=h[0],g=h[1],y=r.default.useState(null),v=y[0],x=y[1],b=(0,r.useRef)("svgPropDistribution"),j=a.select(b.current).select("g");(0,r.useEffect)((function(){var t=[],e=[],r=a.scaleLinear().domain([0,s]).range([n.marginLeft,n.width-n.margin]),i=l.CBins,u=l.TBins,c=a.max([a.max(o.TBins.map((function(t){return t.length})))/u,a.max(o.CBins.map((function(t){return t.length})))/i]);0===c&&(c=1);var f=a.scaleLinear().domain([0,c]).range([n.height/2,n.height-n.margin]),h=a.scaleLinear().domain([0,c]).range([n.height/2,n.margin]),y=a.brushX().extent([[n.marginLeft,n.margin],[n.width-n.margin,n.height-n.margin,n.margin]]).on("end",(function(t){return function(t){var e,n=t.selection;n?(e=[r.invert(n[0]),r.invert(n[1])],d(e)):(e=null,d(null))}(t)}));j.call(y);var b=j.select("#bars").selectAll(".controlBars").data(o.CBins).join("rect").attr("class","controlBars").attr("x",(function(t,e){return r(t.x0)})).attr("y",(function(t,e){return p[e]?p[e].y:h(0)})).attr("width",(function(t){return r(t.x1)-r(t.x0)-1})).attr("height",(function(t,e){return p[e]?p[e].height:0})).attr("fill",m.control).attr("cursor","pointer").on("click",(function(t,e){"1"===a.select(this).attr("opacity")?(b.attr("opacity",null),k.attr("opacity",null)):(b.attr("opacity",.5),k.attr("opacity",.5),a.select(this).attr("opacity",1))}));b.transition().duration(1e3).ease(a.easeLinear).attr("y",(function(e,n){return t[n]={y:h(e.length/i)},h(e.length/i)})).attr("height",(function(e,n){return t[n].height=h(0)-h(e.length/i),h(0)-h(e.length/i)}));var k=j.select("#bars").selectAll(".treatmentBars").data(o.TBins).join("rect").attr("class","treatmentBars").attr("x",(function(t,e){return r(t.x0)})).attr("y",(function(t,e){return f(0)})).attr("width",(function(t){return r(t.x1)-r(t.x0)-1})).attr("height",(function(t,e){return v[e]?v[e].height:0})).attr("fill",m.treatment).attr("cursor","pointer").on("click",(function(t,e){"1"===a.select(this).attr("opacity")?(b.attr("opacity",null),k.attr("opacity",null)):(b.attr("opacity",.5),k.attr("opacity",.5),a.select(this).attr("opacity",1))}));k.transition().duration(1e3).ease(a.easeLinear).attr("height",(function(t,n){return e[n]={height:f(t.length/u)-f(0)},f(t.length/u)-f(0)}));var w=j.select("#x-axis").attr("transform","translate(0, "+(n.height-n.margin)+")").call(a.axisBottom(r).tickSize(3).ticks(5)),E=j.select("#y-axistreatment").attr("transform","translate("+n.marginLeft+", 0)").call(a.axisLeft(f).tickSize(3).ticks(3)),M=j.select("#y-axiscontrol").attr("transform","translate("+n.marginLeft+", 0)").call(a.axisLeft(h).tickSize(3).ticks(3));j.select("#zero").selectAll(".zeroLine").data([0]).join("line").attr("class","zeroLine").attr("y1",(function(t){return f(0)})).attr("x1",n.marginLeft).attr("y2",(function(t){return f(0)})).attr("x2",n.width-n.margin).attr("stroke","black").attr("stroke-dasharray","5 5 2 5"),j.select("#legend").selectAll(".legend").data(["control","treatment"]).join("rect").attr("class","legend").attr("x",(function(t,e){return n.width/2-55+80*e})).attr("y",(function(t,e){return n.margin/2-16})).attr("width",12).attr("height",12).attr("fill",(function(t){return m[t]})),j.select("#legend").selectAll(".legendText").data(["control","treatment"]).join("text").attr("class","legendText").attr("x",(function(t,e){return n.width/2-55+80*e+18})).attr("y",(function(t,e){return n.margin/2-10})).attr("alignment-baseline","middle").attr("text-anchor","start").attr("fill",(function(t){return m[t]})).attr("font-family","sans-serif").attr("font-size","12px").text((function(t){return t})),w.transition().duration(1e3).ease(a.easeLinear).call(a.axisBottom(r).tickSize(3).ticks(5)),E.transition().duration(1e3).ease(a.easeLinear).call(a.axisLeft(f).tickSize(3).ticks(3)),M.transition().duration(1e3).ease(a.easeLinear).call(a.axisLeft(h).tickSize(3).ticks(3)),a.selectAll("#x-axis>.tick>text").each((function(t,e){a.select(this).style("font-size","12px")})),a.selectAll("#y-axistreatment>.tick>text").each((function(t,e){a.select(this).style("font-size","12px")})),a.selectAll("#y-axiscontrol>.tick>text").each((function(t,e){a.select(this).style("font-size","12px")})),g([].concat(t)),x([].concat(e))}),[o]);var k={marginLeft:n.marginLeft,fontFamily:"sans-serif",fontSize:"15px"};return r.default.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.default.createElement("p",{style:k},"Propensity Score Distribution Plot"),r.default.createElement("svg",{width:n.width,height:n.height,ref:b,id:"svgPropDistribution"},r.default.createElement("g",null,r.default.createElement("g",{id:"bars"}),r.default.createElement("g",{id:"x-axis"}),r.default.createElement("g",{id:"y-axistreatment"}),r.default.createElement("g",{id:"y-axiscontrol"}),r.default.createElement("g",{id:"legend"}),r.default.createElement("g",{id:"title"}),r.default.createElement("g",{id:"zero"}))))}},788:(t,e,n)=>{e.__esModule=!0,e.SMDMenu=void 0;var r=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=c(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=a?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}(n(6271)),a=(n(4946),l(n(4113))),i=l(n(2441)),o=l(n(960)),u=l(n(7976));function l(t){return t&&t.__esModule?t:{default:t}}function c(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(c=function(t){return t?n:e})(t)}e.SMDMenu=function(t){var e=t.setSort,n=r.default.useState(!1),l=n[0],c=n[1],s=r.default.useState(null),d=s[0],f=s[1],m=r.default.useState("Adjusted High to Low"),h=m[0],p=m[1];return r.default.createElement("div",null,r.default.createElement("div",null,r.default.createElement(a.default,{style:{marginTop:"42px"},onClick:function(t){return function(t){c(!0),f(t.target)}(t)}},r.default.createElement(u.default,null)),r.default.createElement(i.default,{id:"long-menu",anchorEl:d,open:l,onClose:function(){c(!1),f(null)}},["Adjusted High to Low","Adjusted Low to High","Unadjusted High to Low","Unadjusted Low to High","A-Z Alphebatically","Z-A Alphebatically","Difference High to Low","Difference Low to High"].map((function(t,n){return r.default.createElement(o.default,{key:n,onClick:function(n){var r;(r=t)!==h&&(e(r),c(!1),f(null),p(r))},selected:t===h},t)})))))}},6680:(t,e,n)=>{e.__esModule=!0,e.SMDVis=void 0;var r=o(n(6271)),a=o(n(5651));function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(i=function(t){return t?n:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=i(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var u=a?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}e.SMDVis=function(t){var e=t.layout,n=void 0===e?{height:500,width:600,margin:50,marginLeft:150}:e,i=t.SMDDataset,o=void 0===i?[]:i,u=t.SMDExtent,l=void 0===u?[]:u,c=(0,r.useRef)("svgSMD"),s=a.select(c.current).select("g");(0,r.useEffect)((function(){var t=a.scaleLinear().domain(l).range([n.marginLeft,n.width-n.margin]),e=a.scaleBand().domain(o.map((function(t){return t.covariate}))).range([n.margin,n.height-n.margin]),r=a.select("#tooltip").attr("opacity",0),i=r.select("#tooltip_text").attr("text-anchor","middle").attr("alignment-baseline","hanging").attr("x","11").attr("y","1").style("font-size","11px").style("font-family","sans-serif"),u=(r.select("#tooltip_rect").attr("fill","white").attr("width","22").attr("height","12").attr("x","0").attr("y","0"),s.select("#adjusted").selectAll(".adjustedSMD").data(o).join("circle").attr("class","adjustedSMD").attr("cy",(function(t){return e(t.covariate)+e.bandwidth()/2})).attr("r",3).attr("fill","black").attr("stroke","black").attr("cx",(function(e){return t(e.adjusted)?t(e.adjusted):n.marginLeft})).attr("cursor","pointer").on("mouseover",(function(a,o){var u=o.adjusted,l=o.covariate;r.attr("opacity",1).attr("transform","translate("+(t(u)?t(u)-11:n.marginLeft-11)+", "+(e(l)+e.bandwidth()/2-15)+")"),i.text(""+Math.round(100*u)/100)})).on("mouseout",(function(){r.attr("opacity",0)})),s.select("#unadjusted").selectAll(".unadjustedSMD").data(o).join("circle").attr("class","unadjustedSMD").attr("cy",(function(t){return e(t.covariate)+e.bandwidth()/2})).attr("r",3).attr("fill","white").attr("stroke","black").attr("cx",(function(e){return t(e.unadjusted)?t(e.unadjusted):n.marginLeft})).attr("cursor","pointer").on("mouseover",(function(a,o){var u=o.unadjusted,l=o.covariate;r.attr("opacity",1).attr("transform","translate("+(t(u)?t(u)-11:n.marginLeft-11)+", "+(e(l)+e.bandwidth()/2-15)+")"),i.text(""+Math.round(100*u)/100)})).on("mouseout",(function(){r.attr("opacity",0)})),s.select("#diff").selectAll(".diffLine").data(o).join("line").attr("class","diffLine").attr("y1",(function(t){return e(t.covariate)+e.bandwidth()/2})).attr("y2",(function(t){return e(t.covariate)+e.bandwidth()/2})).attr("stroke","black").attr("stroke-dasharray","2").attr("x1",(function(e){return a.min([t(e.unadjusted),t(e.adjusted)])})).attr("x2",(function(e){return a.max([t(e.unadjusted),t(e.adjusted)])})),s.select("#threshold").selectAll(".thresholdText").data([.1]).join("text").attr("class","thresholdText").attr("x",(function(e){return t(e)+5})).attr("y",n.margin-20).text((function(t){return t})).attr("font-family","sans-serif").attr("font-size","10px").attr("alignment-baseline","hanging"),s.select("#threshold").selectAll(".thresholdLine").data([.1]).join("line").attr("class","thresholdLine").attr("x1",(function(e){return t(e)})).attr("y1",n.margin-20).attr("x2",(function(e){return t(e)})).attr("y2",n.height-n.margin).attr("stroke","black").attr("stroke-dasharray","5 5 2 5"),s.select("#x-axis").attr("transform","translate(0, "+(n.height-n.margin)+")").call(a.axisBottom(t).tickSize(3).ticks(5)));s.select("#y-axis").attr("transform","translate("+n.marginLeft+", 0)").call(a.axisLeft(e).tickSize(3).ticks(5)),s.select("#legend").selectAll(".legend").data(["adjusted","unadjusted"]).join("circle").attr("class","legend").attr("cx",(function(t,e){return(n.width-n.marginLeft-n.margin)/2+n.marginLeft-48+80*e})).attr("cy",(function(t,e){return n.margin/2-10})).attr("r",3).attr("fill",(function(t){return"adjusted"===t?"black":"white"})).attr("stroke","black"),s.select("#legend").selectAll(".legendText").data(["adjusted","unadjusted"]).join("text").attr("class","legendText").attr("x",(function(t,e){return(n.width-n.marginLeft-n.margin)/2+n.marginLeft-48+80*e+10})).attr("y",(function(t,e){return n.margin/2-10})).text((function(t){return t})).attr("alignment-baseline","middle").attr("font-family","sans-serif").attr("font-size","12px"),u.transition().duration(750).ease(a.easeLinear).call(a.axisBottom(t).tickSize(3).ticks(5)),a.selectAll("#x-axis>.tick>text").each((function(t,e){a.select(this).style("font-size","12px")}))}),[o]);var d={marginLeft:n.marginLeft,fontFamily:"sans-serif",fontSize:"15px"};return r.default.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.default.createElement("p",{style:d},"Standardized Mean Difference"),r.default.createElement("svg",{width:n.width,height:n.height,ref:c,id:"svgSMD"},r.default.createElement("g",null,r.default.createElement("g",{id:"diff"}),r.default.createElement("g",{id:"threshold"}),r.default.createElement("g",{id:"unadjusted"}),r.default.createElement("g",{id:"adjusted"}),r.default.createElement("g",{id:"x-axis"}),r.default.createElement("g",{id:"y-axis"}),r.default.createElement("g",{id:"legend"}),r.default.createElement("g",{id:"title"}),r.default.createElement("g",{id:"tooltip"},r.default.createElement("rect",{id:"tooltip_rect"}),r.default.createElement("text",{id:"tooltip_text"})))))}},1602:(t,e,n)=>{e.__esModule=!0,e.DAG=void 0;var r=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=O(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=a?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}(n(6271)),a=n(461),i=n(4368),o=n(4656),u=n(6191),l=n(4946),c=n(1817),s=n(2065),d=n(1660),f=n(9726),m=n(4608),h=M(n(2489)),p=(M(n(2093)),M(n(9824)),M(n(2154)),M(n(4113))),g=(M(n(3027)),M(n(2392)),M(n(6484)),M(n(9376))),y=M(n(3332)),v=M(n(2558)),x=M(n(7774)),b=M(n(3066)),j=(M(n(8479)),M(n(660))),k=M(n(9435)),w=M(n(1800)),E=(M(n(2761)),n(5243));function M(t){return t&&t.__esModule?t:{default:t}}function O(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(O=function(t){return t?n:e})(t)}function S(){return S=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},S.apply(this,arguments)}function A(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return C(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}e.DAG=function(t){var e=t.attributes,n=void 0===e?[]:e,M=t.graph,O=t._svg,C=void 0===O?"svgDAG":O,_=t._dag,P=t._colliders,D=t._mediators,L=t._confounds,T=t._prognostics,B=r.default.useState({nodes:[],links:[]}),I=B[0],W=B[1],z=r.default.useState("default"),V=z[0],R=z[1],N=r.default.useState(!1),Q=N[0],G=N[1],J=r.default.useState(!1),H=J[0],$=J[1],F=r.default.useState(!1),U=F[0],q=F[1],Y=r.default.useState(),Z=Y[0],X=Y[1],K=r.default.useState({}),tt=K[0],et=K[1],nt=r.default.useState(""),rt=nt[0],at=nt[1],it=r.default.useState([]),ot=it[0],ut=it[1],lt=r.default.useState([]),ct=lt[0],st=lt[1],dt=r.default.useState([]),ft=dt[0],mt=dt[1],ht=r.default.useState([]),pt=ht[0],gt=ht[1],yt=r.default.useState({}),vt=yt[0],xt=yt[1],bt=r.default.useState([]),jt=bt[0],kt=bt[1],wt=r.default.useState(""),Et=wt[0],Mt=wt[1],Ot=r.default.useState(""),St=Ot[0],At=Ot[1],Ct=r.default.useState({}),_t=(Ct[0],Ct[1],r.default.useState(new Set)),Pt=(_t[0],_t[1]),Dt={height:500,width:1e3,margin:60};function Lt(){return(new Date).getTime()+Math.floor(98*Math.random())}function Tt(t,e,n,r,a){var i,o=document.getElementById(_),u=JSON.stringify(t),l=document.getElementById(P),c=document.getElementById(D),s=document.getElementById(L),d=document.getElementById(T);o&&(o.value=u,(i=document.createEvent("HTMLEvents")).initEvent("input",!1,!0),o.dispatchEvent(i)),l&&(l.value=JSON.stringify(e),(i=document.createEvent("HTMLEvents")).initEvent("input",!1,!0),l.dispatchEvent(i)),c&&(c.value=JSON.stringify(n),(i=document.createEvent("HTMLEvents")).initEvent("input",!1,!0),c.dispatchEvent(i)),s&&(s.value=JSON.stringify(r),(i=document.createEvent("HTMLEvents")).initEvent("input",!1,!0),s.dispatchEvent(i)),d&&(d.value=JSON.stringify(a),(i=document.createEvent("HTMLEvents")).initEvent("input",!1,!0),d.dispatchEvent(i))}function Bt(t,e,n,r){if(void 0===e&&(e=!1),void 0===n&&(n=Dt.width/2),void 0===r&&(r=Dt.height/2),jt.indexOf(t)<0){var a=Lt(),i={nodes:[].concat(I.nodes,[{x:n,y:r,id:a,name:t,parents:new Set,children:new Set,$custom:vt[t]?vt[t].$custom:e,tags:vt[t]?vt[t].tags:[]}]),links:[].concat(I.links)};W(i),kt([].concat(jt,[t]))}}function It(t){var e=jt.indexOf(t);jt.splice(e,1),kt([].concat(jt));var n=I.nodes.filter((function(e){return e.name!==t})),r=I.links.filter((function(e){return e.target.name!==t&&e.source.name!==t}));W({nodes:[].concat(n),links:[].concat(r)}),t===Et&&Mt(""),t===St&&At("")}function Wt(t){Mt(t)}function zt(t){At(t)}function Vt(t,e){if(void 0===e&&(e=null),t.id===e)return[];for(var n,r=Array.from(t.children),a=function(){var t=n.value,a=I.nodes.filter((function(e){return e.id===t}))[0];r=r.concat(Vt(a,e))},i=A(t.children);!(n=i()).done;)a();return r}function Rt(t,e,n,r){if(void 0===n&&(n=[]),void 0===r&&(r=[]),0===I.nodes.length||0===I.links.length)return[];if(""===t||""===e)return[];for(var a,i=I.nodes.filter((function(e){return e.name===t}))[0].id,o=I.nodes.filter((function(t){return t.name===e}))[0].id,u=[],l=A(I.nodes);!(a=l()).done;){var c=a.value;if(c.id!==i){var s=n.indexOf(c.id)>=0,d=r.indexOf(c.id)>=0,f=c.children.has(o),m=c.children.has(i);!f||m||s||d||u.push(c)}}return u}function Nt(t,e){if(0===I.nodes.length||0===I.links.length)return[];if(""===t||""===e)return[];var n=I.nodes.filter((function(e){return e.name===t}))[0],r=I.nodes.filter((function(t){return t.name===e}))[0],a=Vt(n,r.id),i=new Set(Vt(r));return new Set([].concat(a).filter((function(t){return i.has(t)})))}function Qt(t,e){if(t.id===e)return[t];if(t.id!==e&&0===t.children.size)return[];for(var n,r=[],a=function(){var t=n.value,a=Qt(I.nodes.filter((function(e){return e.id===t}))[0],e);a.length>0&&(r=r.concat(a))},i=A(t.children);!(n=i()).done;)a();return r.map((function(e){return[t].concat(e)}))}function Gt(t,e){if(0===I.nodes.length||0===I.links.length)return[];if(""===t||""===e)return[];for(var n,r=I.nodes.filter((function(e){return e.name===t}))[0],a=I.nodes.filter((function(t){return t.name===e}))[0].id,i=[],o=A(Qt(r,a));!(n=o()).done;){var u=n.value.filter((function(t){return t.id!==r.id&&t.id!==a}));i=i.concat(u)}return new Set(i)}function Jt(t,e){if(0===I.nodes.length||0===I.links.length)return[];if(""===t||""===e)return[];for(var n,r=[],a=I.nodes.filter((function(e){return e.name===t}))[0].id,i=function(){var i=n.value,o=new Set(Vt(i,a)),u=new Set(I.nodes.filter((function(t){return o.has(t.id)})).map((function(t){return t.name})));u.has(t)&&u.has(e)&&r.push(i)},o=A(I.nodes);!(n=o()).done;)i();return r}(0,r.useEffect)((function(){if(M){var t=function(t){for(var e,n=(0,u.scaleLinear)().domain((0,l.extent)(t.nodes,(function(t){return t.x}))).range([Dt.margin,Dt.width-Dt.margin]),r=(0,u.scaleLinear)().domain((0,l.extent)(t.nodes,(function(t){return t.y}))).range([Dt.margin,Dt.height-Dt.margin]),a=JSON.parse(JSON.stringify(t)),i=a.nodes,o=a.links,c=new Set,s={},d=A(i);!(e=d()).done;){var f=e.value;if(!f.id){for(var m=Lt();c.has(m);)m=Lt();f.id=m}c.add(f.id),f.x=n(f.x),f.y=r(f.y),f.children=new Set,f.parents=new Set,s[f.name]={$custom:!1,tags:[]}}Pt(c),xt(s),kt(Object.keys(s));for(var h,p=function(){var t=h.value,e=t.source.name?t.source.name:t.source,n=t.target.name?t.target.name:t.target,r=i.filter((function(t){return t.name===e}))[0],a=i.filter((function(t){return t.name===n}))[0];r.children.add(a.id),a.parents.add(r.id),t.source=S({},i.filter((function(t){return t.name===e}))[0]),t.target=S({},i.filter((function(t){return t.name===n}))[0]),delete t.source.children,delete t.source.parents,delete t.target.children,delete t.target.parents},g=A(o);!(h=g()).done;)p();return a}(M);W(t);var e=document.getElementById(_),n=JSON.stringify(t);if(e){e.value=n;var r=document.createEvent("HTMLEvents");r.initEvent("input",!1,!0),e.dispatchEvent(r)}}}),[M]),(0,r.useEffect)((function(){if(n&&n.length>0&&!M){for(var t,e={},r=A(n);!(t=r()).done;)e[t.value]={$custom:!1,tags:[]};xt(e)}}),[n]),(0,r.useEffect)((function(){if(Et.length>0&&St.length>0){for(var t=Array.from(Nt(Et,St)),e=[],n=function(){var t=a[r];e.push(I.nodes.filter((function(e){return e.id===t}))[0].name)},r=0,a=t;r<a.length;r++)n();var i=Array.from(Gt(Et,St)),o=Jt(Et,St),u=Rt(Et,St,i.map((function(t){return t.id})),o.map((function(t){return t.id})));ut(e),st(i.map((function(t){return t.name}))),mt(o.map((function(t){return t.name}))),gt(u.map((function(t){return t.name}))),Tt(I,e,i,o,u)}else ut([]),st([]),mt([]),gt([]),Tt(I,[],[],[],[])}),[Et,St,I]),(0,a.createTheme)({palette:{grey:{light:i.grey[300],main:i.grey[500],dark:i.grey[700],contrastText:"#fff"}}});var Ht={height:"24px"},$t={height:"48px",borderRadius:"24px",marginLeft:"10px","& .MuiOutlinedInput-input":{height:"12px"},"& .MuiOutlinedInput-root":{padding:"11px"},"& .MuiInputLabel-formControl":{top:"-1px"}};return r.default.createElement("div",{style:{display:"flex"}},r.default.createElement(c.AttributesManager,{attributes:Object.keys(vt),added:jt,treatment:Et,outcome:St,addAttribute:Bt,deleteAttribute:It,changeTreatment:Wt,changeOutcome:zt,handleAddTag:function(t){X(t),q(!0)},handleNodeOpen:function(){$(!0)}}),r.default.createElement(d.DownloadDialog,{open:Q,nodelinks:I,treatment:Et,outcome:St,confounds:ft,colliders:ot,mediators:ct,prognostics:pt,handleClose:function(){G(!1)}}),r.default.createElement(m.NodeDialog,{open:H,handleNodeClose:function(){$(!1)},addAttribute:Bt,addCustom:function(t){var e=JSON.parse(JSON.stringify(vt));e[t]={$custom:!0,tags:[]},xt(e),Bt(t,!0)}}),r.default.createElement(f.TagDialog,{tagNode:Z,tagColors:tt,attrTags:vt[Z]?vt[Z].tags:[],open:U,handleTagClose:function(){q(!1)},updateTag:function(t,e){if(!(vt[Z].tags&&vt[Z].tags.indexOf(e)>=0)){var n=S({},I),r=n.nodes.filter((function(t){return t.name===Z}))[0];r.tags?r.tags.push(e):r.tags=[e],W(n);var a=JSON.parse(JSON.stringify(vt));a[Z].tags.push(e),xt(a),tt[e]=t,et(S({},tt))}},deleteTag:function(t){var e=S({},I),n=e.nodes.filter((function(t){return t.name===Z}))[0],r=n.tags.indexOf(t);n.tags.splice(r,1),W(e);var a=JSON.parse(JSON.stringify(vt));r=a[Z].tags.indexOf(t),a[Z].tags.splice(r,1),xt(a)}}),r.default.createElement("div",null,r.default.createElement("div",{style:{display:"flex",width:"100%",alignItems:"center",marginBottom:"20px"}},r.default.createElement(x.default,{style:{marginBottom:"0px",height:"48px","& .MuiButtonBase-root":{height:"48px"}},value:V,exclusive:!0,onChange:function(t,e){return function(t,e){R(e)}(0,e)},"aria-label":"text alignment"},r.default.createElement(v.default,{value:"default",alt:"select"},r.default.createElement("a",{style:Ht,title:"select"},r.default.createElement(w.default,null))),r.default.createElement(v.default,{value:"path",alt:"edit links"},r.default.createElement("a",{style:Ht,title:"edit links"},r.default.createElement(k.default,{style:{transform:"rotate(-45deg)"}})))),r.default.createElement(h.default,{disablePortal:!0,id:"combo-box-demo",options:jt.concat(Object.keys(tt).map((function(t){return"tag:"+t}))),sx:{width:300},onChange:function(t,e){return function(t,e){at(e)}(0,e)},renderInput:function(t){return r.default.createElement(y.default,S({},t,{sx:$t,label:"Search"}))}}),r.default.createElement("div",{style:{marginLeft:"auto",marginRight:"none"}},r.default.createElement(p.default,{id:"downloadSVG",onClick:function(){(function(t,e,n,r,a){var i="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t))),o=document.createElement("canvas"),u=o.getContext("2d");o.width=e,o.height=n;var l=new Image;l.onload=function(){u.clearRect(0,0,e,n),u.drawImage(l,0,0,e,n),o.toBlob((function(t){Math.round(t.length/1024),a&&a(t)}))},l.src=i})(function(t){t.setAttribute("xlink","http://www.w3.org/1999/xlink");var e=(new XMLSerializer).serializeToString(t);return(e=e.replace(/(\w+)?:?xlink=/g,"xmlns:xlink=")).replace(/NS\d+:href/g,"xlink:href")}((0,o.select)("#"+C).node()),2*Dt.width,2*Dt.height,0,(function(t,e){(0,E.saveAs)(t,"DAG.png")}))}},r.default.createElement("a",{style:Ht,title:"save image"},r.default.createElement(b.default,null))),r.default.createElement(p.default,{onClick:function(){return function(){for(var t,e=Nt(Et,St),n=[],r=function(){var e=t.value;n.push(I.nodes.filter((function(t){return t.id===e}))[0].name)},a=A(e);!(t=a()).done;)r();var i=Array.from(Gt(Et,St)),o=Jt(Et,St),u=Rt(Et,St,i.map((function(t){return t.id})),o.map((function(t){return t.id})));ut(n),st(i.map((function(t){return t.name}))),mt(o.map((function(t){return t.name}))),gt(u.map((function(t){return t.name}))),G(!0)}()}},r.default.createElement("a",{style:Ht,title:"download JSON"},r.default.createElement(j.default,null))))),r.default.createElement(g.default,{elevation:0,variant:"outlined"},r.default.createElement(s.DAGEditor,{layout:Dt,nodelinks:I,mode:V,treatment:Et,outcome:St,mediators:ct,colliders:ot,confounds:ft,prognostics:pt,search:rt,updateNodePos:function(t,e,n){for(var r,a=S({},I),i=A(a.nodes);!(r=i()).done;){var o=r.value;if(o.id===t){o.x=e,o.y=n;break}}for(var u,l=A(a.links);!(u=l()).done;){var c=u.value;c.source.id===t&&(c.source.x=e,c.source.y=n),c.target.id===t&&(c.target.x=e,c.target.y=n)}W(a)},deleteAttribute:It,changeTreatment:Wt,changeOutcome:zt,updateLinks:function(t){for(var e,n=A(I.links);!(e=n()).done;){var r=e.value;if(r.source.id===t[0].id&&r.target.id===t[1].id||r.target.id===t[0].id&&r.source.id===t[1].id)return}if(a=t[0],i=t[1],!new Set(Vt(i)).has(a.id)||(alert("This link cannot be added. The DAG must be acyclic."),0)){for(var a,i,o,u=A(I.nodes);!(o=u()).done;){var l=o.value;l.id===t[0].id?l.children.add(t[1].id):l.id===t[1].id&&l.parents.add(t[0].id)}var c=JSON.parse(JSON.stringify(t));delete c[0].parents,delete c[0].children,delete c[1].parents,delete c[1].children;var s={nodes:[].concat(I.nodes),links:[].concat(I.links,[{source:c[0],target:c[1]}])};W(s)}},deleteLinks:function(t){for(var e,n=I.links.filter((function(e){return!(e.source.id===t.source.id&&e.target.id===t.target.id)})),r=A(I.nodes);!(e=r()).done;){var a=e.value;a.id===t.source.id?a.children.delete(t.target.id):a.id===t.target.id&&a.parents.delete(t.source.id)}var i={nodes:[].concat(I.nodes),links:[].concat(n)};W(i)},_svg:C}))))}},7304:(t,e,n)=>{e.__esModule=!0,e.BeeswarmLeft=void 0;var r=c(n(6271)),a=c(n(5651)),i=u(n(9535)),o=u(n(2331));function u(t){return t&&t.__esModule?t:{default:t}}function l(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(l=function(t){return t?n:e})(t)}function c(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=l(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=a?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}e.BeeswarmLeft=function(t){var e,n=t.layout,u=void 0===n?{height:600,width:80,margin:30,marginLeft:10,marginBottom:30}:n,l=t.data,c=void 0===l?[]:l,s=t.stratify,d=void 0===s?"":s,f=t.thresholdValue,m=void 0===f?0:f,h=t.updateLeftThreshold,p=t.isBinary,g=(0,r.useRef)("svgBeeswarmLeft"),y=a.select(g.current),v=r.default.useState({1:"#698fb8",0:"#f0a856"}),x=(v[0],v[1],a.extent(c,(function(t){return t[d]}))),b=(x[1]-x[0])/100;b=parseFloat(b.toPrecision(2)),e=p?a.scaleLinear().domain([-.5,1.5]).range([u.height-u.marginBottom,u.margin]):a.scaleLinear().domain(x).range([u.height-u.marginBottom,u.margin]),y.select("#points").selectAll(".dataPoint").data(c).join("circle").attr("class","dataPoint").attr("transform",(function(t){return"translate("+(u.width/2+20*(Math.random()-.5))+","+e(t[d])+")"})).attr("r",3).attr("fill","#698fb8").attr("opacity",.2),y.select("#threshold").attr("transform","translate(0, "+e(m)+")").attr("stroke",p?"none":"black").attr("stroke-dasharray","5 5 2 5"),p?y.select("#y-axis").attr("transform","translate("+(u.width-u.margin)+", 0)").call(a.axisRight(e).tickSize(3).tickValues([0,1])):y.select("#y-axis").attr("transform","translate("+(u.width-u.margin)+", 0)").call(a.axisRight(e).tickSize(3));var j={writingMode:"vertical-rl",transform:"rotate(-180deg)",fontFamily:"sans-serif"};return r.default.createElement("div",{style:{display:"flex",alignItems:"center"}},r.default.createElement("p",{style:{writingMode:"vertical-rl",transform:"rotate(-180deg)",fontFamily:"sans-serif",marginTop:"15px",marginBottom:"0px",fontSize:"15px"}},d),r.default.createElement("svg",{width:u.width,height:u.height,ref:g,id:"svgBeeswarmLeft"},r.default.createElement("g",{id:"y-axis"}),r.default.createElement("g",{id:"brush"}),r.default.createElement("g",{id:"points"}),r.default.createElement("line",{id:"threshold",y1:0,y2:0,x1:u.width-u.margin,x2:0}),r.default.createElement("g",{id:"distribution"}),r.default.createElement("g",{id:"title"})),p?r.default.createElement("div",null):r.default.createElement(i.default,{height:u.height-2*u.margin},r.default.createElement(o.default,{sx:{'& input[type="range"]':{WebkitAppearance:"slider-vertical"}},orientation:"vertical",size:"small",min:a.min(c,(function(t){return t[d]})),max:a.max(c,(function(t){return t[d]})),step:b,defaultValue:m,"aria-label":"Small",valueLabelDisplay:"auto",onChangeCommitted:function(t,e){return function(t,e){h(e)}(0,e)}})),r.default.createElement("div",{style:{display:"flex",flexDirection:"column",height:"600px",justifyContent:"space-around"}},r.default.createElement("p",{style:j},p?r.default.createElement("p",null):">= "+m),r.default.createElement("p",{style:j},p?r.default.createElement("p",null):"< "+m)))}},4758:(t,e,n)=>{e.__esModule=!0,e.BeeswarmTop=void 0;var r=c(n(6271)),a=c(n(5651)),i=u(n(9535)),o=u(n(2331));function u(t){return t&&t.__esModule?t:{default:t}}function l(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(l=function(t){return t?n:e})(t)}function c(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=l(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=a?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}e.BeeswarmTop=function(t){var e,n=t.layout,u=void 0===n?{height:70,width:600,margin:15,marginLeft:20}:n,l=t.data,c=void 0===l?[]:l,s=t.stratify,d=void 0===s?"":s,f=t.thresholdValue,m=void 0===f?0:f,h=t.updateTopThreshold,p=t.isBinary,g=(0,r.useRef)("svgBeeswarmTop"),y=a.select(g.current),v=r.default.useState({1:"#698fb8",0:"#f0a856"}),x=(v[0],v[1],a.extent(c,(function(t){return t[d]}))),b=(x[1]-x[0])/100;return b=parseFloat(b.toPrecision(2)),e=p?a.scaleLinear().domain([-.5,1.5]).range([u.marginLeft,u.width-u.margin]):a.scaleLinear().domain(x).range([u.marginLeft,u.width-u.margin]),y.select("#points").selectAll(".dataPoint").data(c).join("circle").attr("class","dataPoint").attr("transform",(function(t){return"translate("+e(t[d])+","+(u.height/2+20*(Math.random()-.5))+")"})).attr("r",3).attr("fill","#698fb8").attr("opacity",.2),y.select("#threshold").attr("transform","translate("+e(m)+", 0)").attr("stroke",p?"none":"black").attr("stroke-dasharray","5 5 2 5"),p?y.select("#x-axis").attr("transform","translate(0, "+(u.height-u.margin)+")").call(a.axisBottom(e).tickSize(3).tickValues([0,1])):y.select("#x-axis").attr("transform","translate(0, "+(u.height-u.margin)+")").call(a.axisBottom(e).tickSize(3)),r.default.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},r.default.createElement("p",{style:{fontFamily:"sans-serif",marginTop:"15px",marginBottom:"0px",fontSize:"15px"}},d),r.default.createElement("svg",{width:u.width,height:u.height,ref:g,id:"svgBeeswarmTop"},r.default.createElement("g",{id:"x-axis"}),r.default.createElement("g",{id:"brush"}),r.default.createElement("g",{id:"points"}),r.default.createElement("line",{id:"threshold",x1:0,x2:0,y1:u.height-u.margin,y2:0}),r.default.createElement("g",{id:"distribution"}),r.default.createElement("g",{id:"title"})),p?r.default.createElement("div",null):r.default.createElement(i.default,{width:u.width-u.marginLeft-u.margin},r.default.createElement(o.default,{size:"small",min:a.min(c,(function(t){return t[d]})),max:a.max(c,(function(t){return t[d]})),step:b,defaultValue:m,"aria-label":"Small",valueLabelDisplay:"auto",onChangeCommitted:function(t,e){return function(t,e){h(e)}(0,e)}})),r.default.createElement("div",{style:{display:"flex",width:"100%",justifyContent:"space-around",fontFamily:"sans-serif"}},r.default.createElement("p",null,p?r.default.createElement("p",null):"< "+m),r.default.createElement("p",null,p?r.default.createElement("p",null):">= "+m)))}},973:(t,e,n)=>{e.__esModule=!0,e.Covariate=void 0;var r,a=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=o(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var u=a?Object.getOwnPropertyDescriptor(t,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}(n(6271)),i=(r=n(2093))&&r.__esModule?r:{default:r};function o(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(o=function(t){return t?n:e})(t)}e.Covariate=function(t){var e=t.value,n=void 0===e?"":e,r=t.color,o=void 0===r?"black":r,u=t.changeStratify,l={grey:{rgb:"rgb(158, 158, 158)",rgba:"rgba(158, 158, 158, 0.05)"},treatment:{rgb:"rgb(78, 121, 167)",rgba:"rgba(78, 121, 167, 0.05)"},outcome:{rgb:"rgb(242, 142, 44)",rgba:"rgba(242, 142, 44, 0.05)"},black:{rgb:"rgb(0, 0, 0)",rgba:"rgba(0, 0, 0, 0.05)"}},c={width:"100%",marginBottom:"5px",color:l[o].rgb,borderColor:l[o].rgb,"&:hover":{borderColor:l[o].rgb,backgroundColor:l[o].rgba}};return a.default.createElement("div",null,a.default.createElement(i.default,{sx:c,onClick:function(){return u(n)},variant:"outlined"},a.default.createElement("a",{title:"click to add"},n)))}},835:(t,e,n)=>{e.__esModule=!0,e.CovariatesManager=void 0;var r=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=o(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var u=a?Object.getOwnPropertyDescriptor(t,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}(n(6271)),a=(n(461),n(4368),n(973));function i(t){return t&&t.__esModule?t:{default:t}}function o(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(o=function(t){return t?n:e})(t)}i(n(2093)),i(n(2441)),i(n(960)),i(n(4431)),e.CovariatesManager=function(t){var e=t.attributes,n=void 0===e?[]:e,i=t.changeStratify,o=t.stratify,u=void 0===o?[]:o;return r.default.createElement("div",null,r.default.createElement("div",{style:{display:"flex",flexDirection:"column",height:"500px",overflow:"scroll"}},n.map((function(t,e){return r.default.createElement(a.Covariate,{value:t,key:"covariate"+e,changeStratify:i,color:u.indexOf(t)<0?"grey":"black"})}))))}},3318:(t,e,n)=>{e.__esModule=!0,e.LegendVis=void 0;var r=o(n(6271)),a=o(n(5651));function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(i=function(t){return t?n:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=i(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var u=a?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}e.LegendVis=function(t){var e=t.layout,n=void 0===e?{height:20,width:600,margin:20,marginLeft:20}:e,i=(0,r.useRef)("svgLegendVis"),o=a.select(i.current),u=r.default.useState({treatment:"#4e79a7",control:"#f28e2b"}),l=u[0];return u[1],o.select("#legend").selectAll(".legendCircle").data(["treatment","control"]).join("circle").attr("class","legendCircle").attr("cx",(function(t,e){return n.width/2-80+115*e})).attr("cy",(function(t){return n.height/2})).attr("r",5).attr("fill",(function(t){return l[t]})),o.select("#legend").selectAll(".legendText").data(["treatment","control"]).join("text").attr("class","legendText").attr("x",(function(t,e){return n.width/2-80+115*e+10})).attr("y",(function(t){return n.height/2})).attr("fill",(function(t){return l[t]})).text((function(t){return t})).attr("alignment-baseline","middle").attr("text-anchor","start").attr("font-family","sans-serif").attr("font-size",12),r.default.createElement("div",null,r.default.createElement("svg",{width:n.width,height:n.height,ref:i,id:"svgLegendVis"},r.default.createElement("g",{id:"legend"})))}},8717:(t,e,n)=>{e.__esModule=!0,e.TreatmentEffectVis=void 0;var r,a=l(n(6271)),i=(r=n(5945))&&r.__esModule?r:{default:r},o=l(n(5651));function u(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(u=function(t){return t?n:e})(t)}function l(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=u(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=a?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}e.TreatmentEffectVis=function(t){var e=t.allData,n=void 0===e?{}:e,r=t.index,u=void 0===r?0:r,l=t.treatment,c=void 0===l?"treatment":l,s=t.outcome,d=void 0===s?"outcome":s,f=((0,a.useRef)("svgTreatmentEffect"),o.select("#svgTreatmentEffect"+u).select("g")),m=a.default.useState({1:"#4e79a7",0:"#f28e2b"}),h=m[0],p=(m[1],a.default.useState([])),g=p[0],y=p[1],v=a.default.useState(""),x=v[0],b=v[1],j=a.default.useState(!1),k=j[0],w=j[1],E=a.default.useState(""),M=(E[0],E[1]),O=a.default.useState({height:500,width:600,margin:50,marginLeft:50}),S=O[0],A=O[1],C=a.default.useState([[0,0],[0,0]]),_=C[0],P=C[1],D=a.default.useState([[0,0],[0,0]]),L=D[0],T=D[1],B=a.default.useState([]),I=B[0],W=B[1],z=a.default.useState([]),V=z[0],R=z[1];function N(t,e,n){var r=o.quantile(t,.25,(function(t){return t[d]})),a=o.quantile(t,.5,(function(t){return t[d]})),i=o.quantile(t,.75,(function(t){return t[d]})),u=i-r,l=r-1.5*u,c=i+1.5*u,s=t.filter((function(t){return t[d]<l||t[d]>c}));return{treatment:e,stratify:n,Q1:r,Q2:a,Q3:i,IQR:u,IQRMin:l,IQRMax:c,outliers:s}}return(0,a.useEffect)((function(){var t=n.data,e=n.stratifyBy,r=2===new Set(t.map((function(t){return t[e]}))).size;y(t),b(e),w(r),M(n.title),A(n.layout);var a=t.filter((function(t){return 1===t[c]})),u=t.filter((function(t){return 0===t[c]}));if(r){var l=a.filter((function(t){return 0===t[e]})),s=a.filter((function(t){return 1===t[e]})),f=u.filter((function(t){return 0===t[e]})),m=u.filter((function(t){return 1===t[e]})),h=[N(l,1,0),N(s,1,1)],p=[N(f,0,0),N(m,0,1)];W(h),R(p)}else{var g=i.default.linear(a.map((function(t){return[t[e],t[d]]}))),v=i.default.linear(u.map((function(t){return[t[e],t[d]]}))),x=o.extent(t,(function(t){return t[e]})),j=g.predict(x[0]),k=g.predict(x[1]),E=v.predict(x[0]),O=v.predict(x[1]);P([j,k]),T([E,O])}}),[n]),(0,a.useEffect)((function(){if(k){var t=o.scaleBand().domain([0,1]).range([S.marginLeft,S.width-S.margin]),e=o.min([o.min(I,(function(t){return t.IQRMin})),o.min(V,(function(t){return t.IQRMin})),o.min(g,(function(t){return t[d]}))]),n=o.scaleLinear().domain([e,o.max(g,(function(t){return t.outcome}))]).range([S.height-S.marginBottom,S.margin]),r=t.bandwidth(),a=S.width/8;f.select("#outcomes").selectAll(".outcomeConnectTreatment").data(I).join("line").attr("class","outcomeConnectTreatment").attr("x1",(function(e){return t(e.stratify)+r/2-a/2-10})).attr("y1",(function(t){return n(t.IQRMax)})).attr("x2",(function(e){return t(e.stratify)+r/2-a/2-10})).attr("y2",(function(t){return n(t.IQRMin)})).attr("stroke","black").attr("stroke-width",2),f.select("#outcomes").selectAll(".outcomeBlockTreatment").data(I).join("rect").attr("class","outcomeBlockTreatment").attr("x",(function(e){return t(e.stratify)+r/2-a-10})).attr("y",(function(t){return n(t.Q3)})).attr("width",a).attr("height",(function(t){return n(t.Q1)-n(t.Q3)})).attr("fill",(function(t){return h[t.treatment]})),f.select("#outcomes").selectAll(".outcomeMeanTreatment").data(I).join("line").attr("class","outcomeMeanTreatment").attr("x1",(function(e){return t(e.stratify)+r/2-a-10})).attr("y1",(function(t){return n(t.Q2)})).attr("x2",(function(e){return t(e.stratify)+r/2-10})).attr("y2",(function(t){return n(t.Q2)})).attr("stroke",(function(t){return n(t.Q1)-n(t.Q3)==0?h[t.treatment]:"white"})).attr("stroke-width",1),f.select("#outcomes").selectAll(".outcomesTreatmentOutlierStratify0").data(I[0].outliers).join("circle").attr("class","outcomesTreatmentOutlierStratify0").attr("cx",(function(e){return t(0)+r/2-10-a/2+15*(Math.random()-.5)})).attr("cy",(function(t){return n(t[d])})).attr("r",3).attr("fill","none").attr("stroke",(function(t){return h[t.treatment]})),f.select("#outcomes").selectAll(".outcomesTreatmentOutlierStratify1").data(I[1].outliers).join("circle").attr("class","outcomesTreatmentOutlierStratify1").attr("cx",(function(e){return t(1)+r/2-10-a/2+15*(Math.random()-.5)})).attr("cy",(function(t){return n(t[d])})).attr("r",3).attr("fill","none").attr("stroke",(function(t){return h[t.treatment]})),f.select("#outcomes").selectAll(".outcomeMinTreatment").data(I).join("line").attr("class","outcomeMinTreatment").attr("x1",(function(e){return t(e.stratify)+r/2-a/2-20})).attr("y1",(function(t){return n(t.IQRMin)})).attr("x2",(function(e){return t(e.stratify)+r/2-a/2})).attr("y2",(function(t){return n(t.IQRMin)})).attr("stroke","black").attr("stroke-width",2),f.select("#outcomes").selectAll(".outcomeMaxTreatment").data(I).join("line").attr("class","outcomeMaxTreatment").attr("x1",(function(e){return t(e.stratify)+r/2-a/2-20})).attr("y1",(function(t){return n(t.IQRMax)})).attr("x2",(function(e){return t(e.stratify)+r/2-a/2})).attr("y2",(function(t){return n(t.IQRMax)})).attr("stroke","black").attr("stroke-width",2),f.select("#outcomes").selectAll(".outcomeConnectControl").data(V).join("line").attr("class","outcomeConnectControl").attr("x1",(function(e){return t(e.stratify)+r/2+a/2+10})).attr("y1",(function(t){return n(t.IQRMax)})).attr("x2",(function(e){return t(e.stratify)+r/2+a/2+10})).attr("y2",(function(t){return n(t.IQRMin)})).attr("stroke","black").attr("stroke-width",2),f.select("#outcomes").selectAll(".outcomeBlockControl").data(V).join("rect").attr("class","outcomeBlockControl").attr("x",(function(e){return t(e.stratify)+r/2+10})).attr("y",(function(t){return n(t.Q3)})).attr("width",a).attr("height",(function(t){return n(t.Q1)-n(t.Q3)})).attr("fill",(function(t){return h[t.treatment]})),f.select("#outcomes").selectAll(".outcomeMeanControl").data(V).join("line").attr("class","outcomeMeanControl").attr("x1",(function(e){return t(e.stratify)+r/2+10})).attr("y1",(function(t){return n(t.Q2)})).attr("x2",(function(e){return t(e.stratify)+r/2+10+a})).attr("y2",(function(t){return n(t.Q2)})).attr("stroke",(function(t){return n(t.Q1)-n(t.Q3)==0?h[t.treatment]:"white"})).attr("stroke-width",1),f.select("#outcomes").selectAll(".outcomesControlOutlierStratify0").data(V[0].outliers).join("circle").attr("class","outcomesTreatmentOutlierStratify0").attr("cx",(function(e){return t(0)+r/2+10+a/2+15*(Math.random()-.5)})).attr("cy",(function(t){return n(t[d])})).attr("r",3).attr("fill","none").attr("stroke",(function(t){return h[t.treatment]})),f.select("#outcomes").selectAll(".outcomesControlOutlierStratify1").data(V[1].outliers).join("circle").attr("class","outcomesTreatmentOutlierStratify1").attr("cx",(function(e){return t(1)+r/2+10+a/2+15*(Math.random()-.5)})).attr("cy",(function(t){return n(t[d])})).attr("r",3).attr("fill","none").attr("stroke",(function(t){return h[t.treatment]})),f.select("#outcomes").selectAll(".outcomeMinControl").data(V).join("line").attr("class","outcomeMinControl").attr("x1",(function(e){return t(e.stratify)+r/2+a/2})).attr("y1",(function(t){return n(t.IQRMin)})).attr("x2",(function(e){return t(e.stratify)+r/2+a/2+20})).attr("y2",(function(t){return n(t.IQRMin)})).attr("stroke","black").attr("stroke-width",2),f.select("#outcomes").selectAll(".outcomeMaxControl").data(V).join("line").attr("class","outcomeMaxControl").attr("x1",(function(e){return t(e.stratify)+r/2+a/2})).attr("y1",(function(t){return n(t.IQRMax)})).attr("x2",(function(e){return t(e.stratify)+r/2+a/2+20})).attr("y2",(function(t){return n(t.IQRMax)})).attr("stroke","black").attr("stroke-width",2),f.select("#x-axis").attr("transform","translate(0, "+(S.height-S.marginBottom)+")").call(o.axisBottom(t).tickSize(3).ticks(5))}else t=o.scaleLinear().domain(o.extent(g,(function(t){return t[x]}))).range([S.marginLeft,S.width-S.margin]),n=o.scaleLinear().domain(o.extent(g,(function(t){return t[d]}))).range([S.height-S.marginBottom,S.margin]),f.select("#outcomes").selectAll(".outcomeCircles").data(g).join("circle").attr("class","outcomeCircles").attr("cx",(function(e){return t(e[x])+15*(Math.random()-.5)})).attr("cy",(function(t){return n(t[d])})).attr("r",3).attr("fill","none").attr("stroke",(function(t){return h[t[c]]})).attr("cursor","pointer"),f.select("#regression").selectAll(".regressionLine").data([_,L]).join("line").attr("class","regressionLine").attr("x1",(function(e){return t(e[0][0])})).attr("y1",(function(t){return n(t[0][1])})).attr("x2",(function(e){return t(e[1][0])})).attr("y2",(function(t){return n(t[1][1])})).attr("stroke","black"),f.select("#x-axis").attr("transform","translate(0, "+(S.height-S.marginBottom)+")").call(o.axisBottom(t).tickSize(3).ticks(5));f.select("#x-axis").selectAll("#axis-title").data([x]).join("text").attr("id","axis-title").attr("x",S.width/2).attr("y",30).attr("text-anchor","middle").attr("fill","black").attr("font-size","15px").text((function(t){return t})),f.select("#y-axis").selectAll("#axis-title").data(["outcome"]).join("text").attr("id","axis-title").attr("text-anchor","middle").attr("transform","translate("+(S.marginLeft-5)+", "+S.height/2+") rotate(-90)").attr("fill","black").attr("font-size","15px").text((function(t){return t})),o.selectAll("#x-axis>.tick>text").each((function(t,e){o.select(this).style("font-size","12px")})),f.select("#y-axis").attr("transform","translate("+S.marginLeft+", 0)").call(o.axisLeft(n).tickSize(3).ticks(5)),o.selectAll("#y-axis>.tick>text").each((function(t,e){o.select(this).style("font-size","12px")}))}),[g,x,k,S]),a.default.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},a.default.createElement("svg",{width:S.width,height:S.height,id:"svgTreatmentEffect"+u},a.default.createElement("g",null,a.default.createElement("g",{id:"x-axis"}),a.default.createElement("g",{id:"y-axis"}),a.default.createElement("g",{id:"outcomes"}),a.default.createElement("g",{id:"regression"}),a.default.createElement("g",{id:"title"}))))}},5871:(t,e,n)=>{e.__esModule=!0,e.TreatmentEffectVisViolin=void 0;var r,a=u(n(6271)),i=((r=n(5945))&&r.__esModule,u(n(5651)));function o(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(o=function(t){return t?n:e})(t)}function u(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=o(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var u=a?Object.getOwnPropertyDescriptor(t,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function l(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}e.TreatmentEffectVisViolin=function(t){var e=t.allData,n=void 0===e?{}:e,r=t.index,o=void 0===r?0:r,u=t.treatment,c=void 0===u?"treatment":u,s=(t.outcome,t.effect),d=void 0===s?"effect":s,f=t.effectExtent,m=void 0===f?[0,0]:f,h=t.isBinary,p=(0,a.useRef)("svgTreatmentEffect"),g=i.select(p.current),y=a.default.useState({1:"#698fb8",0:"#f0a856"}),v=y[0],x=(y[1],a.default.useState([])),b=x[0],j=x[1],k=a.default.useState(""),w=k[0],E=k[1],M=a.default.useState(""),O=(M[0],M[1]),S=a.default.useState({height:500,width:600,margin:50,marginLeft:50,marginBottom:35}),A=S[0],C=S[1],_=a.default.useState([[0,0],[0,0]]),P=(_[0],_[1],a.default.useState([[0,0],[0,0]])),D=(P[0],P[1],a.default.useState([])),L=D[0],T=D[1],B=a.default.useState([]),I=B[0],W=(B[1],a.default.useState([])),z=W[0],V=(W[1],a.default.useState([])),R=V[0],N=V[1];function Q(t){var e=i.quantile(t,.25,(function(t){return t})),n=i.quantile(t,.5,(function(t){return t})),r=i.quantile(t,.75,(function(t){return t})),a=r-e,o=e-1.5*a,u=r+1.5*a,l=t.filter((function(t){return t<o||t>u}));return{Q1:e,Q2:n,Q3:r,IQR:a,IQRMin:o,IQRMax:u,outliers:l}}return(0,a.useEffect)((function(){var t=n.data,e=n.stratifyBy;if(j(t),E(e),O(n.title),C(n.layout),t.filter((function(t){return 1===t[c]})),t.filter((function(t){return 0===t[c]})),e){if(h){var r=(m[1]-m[0])/20,a=[m[0]-r,m[1]+r],o=(l=i.histogram().value((function(t){return t[d]})).domain(a).thresholds(22),t.filter((function(t){return 0===t[e]}))),u=t.filter((function(t){return 1===t[e]}));N([l(o),l(u)])}}else{var l,s=(m[1]-m[0])/20,f=[m[0]-s,m[1]+s],p=(l=i.histogram().value((function(t){return t[d]})).domain(f).thresholds(22))(t);T(p)}}),[n]),(0,a.useEffect)((function(){if(""===w){for(var t,e=i.scaleBand().domain([0,0]).range([A.marginLeft,A.width-A.margin]),r=i.scaleLinear().domain(m).range([A.height-A.marginBottom,A.margin]),a=e.bandwidth(),o=(A.width,L.reduce((function(t,e){return t+e.length}),0)),u=i.max(L.map((function(t){return t.length/o}))),c=i.scaleLinear().range([0,a]).domain([-u,u]),s=L,f=c,p=o,y=[],x=l(s);!(t=x()).done;){var j=t.value;y=y.concat(j.map((function(t){return t.effect})))}var k=Q(y);g.select("#violin").selectAll(".areacohort").data([s]).join("path").attr("class","areacohort").attr("transform","translate("+e(0)+", 0)").datum((function(t){return t})).style("stroke","none").style("fill",v[1]).attr("d",i.area().x0((function(t){return f(0)})).x1((function(t){return f(t.length/p)})).y((function(t){return r(t.x0)})).curve(i.curveCatmullRom)),g.select("#violin").selectAll(".pointcohort").data(y).join("circle").attr("class","pointcohort").attr("cx",(function(t){return e(0)+a/4+15*(Math.random()-.5)})).attr("cy",(function(t){return r(t)})).attr("r",3).attr("opacity",.2).attr("fill",v[1]),g.select("#IQR").selectAll(".boxplotcohort").data([k]).join("rect").attr("class","boxplotcohort").attr("x",e(0)+a/4-15).attr("y",(function(t){return r(t.Q3)})).attr("width",30).attr("height",(function(t){return r(t.Q1)-r(t.Q3)})).attr("fill","none").attr("stroke","black"),g.select("#IQR").selectAll(".boxmediancohort").data([k]).join("line").attr("class","boxmediancohort").attr("x1",e(0)+a/4-15).attr("y1",(function(t){return r(t.Q2)})).attr("x2",e(0)+a/4+15).attr("y2",(function(t){return r(t.Q2)})).attr("fill","none").attr("stroke","black"),g.select("#IQR").selectAll(".whiskerTopcohort").data([k]).join("line").attr("class","whiskerTopcohort").attr("x1",e(0)+a/4).attr("y1",(function(t){return r(t.IQRMax)})).attr("x2",e(0)+a/4).attr("y2",(function(t){return r(t.Q3)})).attr("fill","none").attr("stroke","black"),g.select("#IQR").selectAll(".whiskerBottomcohort").data([k]).join("line").attr("class","whiskerBottomcohort").attr("x1",e(0)+a/4).attr("y1",(function(t){return r(t.Q1)})).attr("x2",e(0)+a/4).attr("y2",(function(t){return r(t.IQRMin)})).attr("fill","none").attr("stroke","black"),g.select("#IQR").selectAll(".topCapcohort").data([k]).join("line").attr("class","topCapcohort").attr("x1",e(0)+a/4-5).attr("y1",(function(t){return r(t.IQRMax)})).attr("x2",e(0)+a/4+5).attr("y2",(function(t){return r(t.IQRMax)})).attr("fill","none").attr("stroke","black"),g.select("#IQR").selectAll(".bottomCapcohort").data([k]).join("line").attr("class","bottomCapcohort").attr("x1",e(0)+a/4-5).attr("y1",(function(t){return r(t.IQRMin)})).attr("x2",e(0)+a/4+5).attr("y2",(function(t){return r(t.IQRMin)})).attr("fill","none").attr("stroke","black"),g.select("#x-axis").attr("transform","translate(0, "+(A.height-A.marginBottom/2)+")").call(i.axisBottom(e).tickSize(3).ticks(5).tickFormat((function(t){return"cohort"})))}else h?function(){e=i.scaleBand().domain([0,1]).range([A.marginLeft,A.width-A.margin]),r=i.scaleLinear().domain(m).range([A.height-A.marginBottom,A.margin]);for(var t,n=e.bandwidth(),a=(A.width,[]),o=function(){var e=t.value,r=e.reduce((function(t,e){return t+e.length}),0),o=i.max(e.map((function(t){return t.length/r}))),u=i.scaleLinear().range([0,n]).domain([-o,o]);a.push({scale:u,len:r})},u=l(R);!(t=u()).done;)o();for(var c=function(t){for(var o,u=R[t],c=a[t].scale,s=a[t].len,d=[],f=l(u);!(o=f()).done;){var m=o.value;d=d.concat(m.map((function(t){return t.effect})))}var h=Q(d);g.select("#violin").selectAll(".area"+t).data([u]).join("path").attr("class","area"+t).attr("transform","translate("+e(t)+", 0)").datum((function(t){return t})).style("stroke","none").style("fill",v[t]).attr("d",i.area().x0((function(t){return c(0)})).x1((function(t){return c(t.length/s)})).y((function(t){return r(t.x0)})).curve(i.curveCatmullRom)),g.select("#violin").selectAll(".point"+t).data(d).join("circle").attr("class","point"+t).attr("cx",(function(r){return e(t)+n/4+15*(Math.random()-.5)})).attr("cy",(function(t){return r(t)})).attr("r",3).attr("opacity",.2).attr("fill",v[t]),g.select("#IQR").selectAll(".boxplot"+t).data([h]).join("rect").attr("class","boxplot"+t).attr("x",e(t)+n/4-15).attr("y",(function(t){return r(t.Q3)})).attr("width",30).attr("height",(function(t){return r(t.Q1)-r(t.Q3)})).attr("fill","none").attr("stroke","black"),g.select("#IQR").selectAll(".boxmedian"+t).data([h]).join("line").attr("class","boxmedian"+t).attr("x1",e(t)+n/4-15).attr("y1",(function(t){return r(t.Q2)})).attr("x2",e(t)+n/4+15).attr("y2",(function(t){return r(t.Q2)})).attr("fill","none").attr("stroke","black"),g.select("#IQR").selectAll(".whiskerTop"+t).data([h]).join("line").attr("class","whiskerTop"+t).attr("x1",e(t)+n/4).attr("y1",(function(t){return r(t.IQRMax)})).attr("x2",e(t)+n/4).attr("y2",(function(t){return r(t.Q3)})).attr("fill","none").attr("stroke","black"),g.select("#IQR").selectAll(".whiskerBottom"+t).data([h]).join("line").attr("class","whiskerBottom"+t).attr("x1",e(t)+n/4).attr("y1",(function(t){return r(t.Q1)})).attr("x2",e(t)+n/4).attr("y2",(function(t){return r(t.IQRMin)})).attr("fill","none").attr("stroke","black"),g.select("#IQR").selectAll(".topCap"+t).data([h]).join("line").attr("class","topCap"+t).attr("x1",e(t)+n/4-5).attr("y1",(function(t){return r(t.IQRMax)})).attr("x2",e(t)+n/4+5).attr("y2",(function(t){return r(t.IQRMax)})).attr("fill","none").attr("stroke","black"),g.select("#IQR").selectAll(".bottomCap"+t).data([h]).join("line").attr("class","bottomCap"+t).attr("x1",e(t)+n/4-5).attr("y1",(function(t){return r(t.IQRMin)})).attr("x2",e(t)+n/4+5).attr("y2",(function(t){return r(t.IQRMin)})).attr("fill","none").attr("stroke","black")},s=0;s<R.length;s++)c(s);g.select("#x-axis").attr("transform","translate(0, "+(A.height-A.marginBottom/2)+")").call(i.axisBottom(e).tickSize(3).ticks(5))}():(e=i.scaleLinear().domain(n.stratifyExtent).range([A.marginLeft,A.width-A.margin]),r=i.scaleLinear().domain(m).range([A.height-A.marginBottom,A.margin]),g.select("#effects").selectAll(".effectCircles").data(b).join("circle").attr("class","effectCircles").attr("cx",(function(t){return e(t[w])+15*(Math.random()-.5)})).attr("cy",(function(t){return r(t[d])})).attr("r",3).attr("opacity",.2).attr("fill","#698fb8").attr("cursor","pointer"),g.select("#x-axis").attr("transform","translate(0, "+(A.height-A.marginBottom/2)+")").call(i.axisBottom(e).tickSize(3).ticks(5)));m[0]<0&&m[1]>0&&g.select("#zero").selectAll(".zeroLine").data([0]).join("line").attr("class","zeroLine").attr("y1",(function(t){return r(0)})).attr("x1",A.marginLeft).attr("y2",(function(t){return r(0)})).attr("x2",A.width-A.margin).attr("stroke","black").attr("stroke-dasharray","5 5 2 5"),g.select("#x-axis").selectAll("#axis-title").data([w]).join("text").attr("id","axis-title").attr("x",A.width/2).attr("y",-10).attr("text-anchor","middle").attr("fill","black").attr("font-size","15px").text((function(t){return t})),g.select("#y-axis").selectAll("#axis-title").data(["effect"]).join("text").attr("id","axis-title").attr("text-anchor","middle").attr("transform","translate("+(A.marginLeft/2-5)+", "+A.height/2+") rotate(-90)").attr("fill","black").attr("font-size","15px").text((function(t){return t})),i.selectAll("#x-axis>.tick>text").each((function(t,e){i.select(this).style("font-size","10px")})),g.select("#y-axis").attr("transform","translate("+A.marginLeft/2+", 0)").call(i.axisLeft(r).tickSize(3).ticks(5)),i.selectAll("#y-axis>.tick>text").each((function(t,e){i.select(this).style("font-size","10px")}))}),[b,w,h,A,z,I,L]),a.default.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},a.default.createElement("svg",{width:A.width,height:A.height,ref:p,id:"svgTreatmentEffect"+o},a.default.createElement("g",null,a.default.createElement("g",{id:"zero"}),a.default.createElement("g",{id:"x-axis"}),a.default.createElement("g",{id:"y-axis"}),a.default.createElement("g",{id:"effects"}),a.default.createElement("g",{id:"regression"}),a.default.createElement("g",{id:"violin"}),a.default.createElement("g",{id:"IQR"}),a.default.createElement("g",{id:"title"}))))}},2405:(t,e,n)=>{e.__esModule=!0,e.TreatmentEffectExplorer=void 0;var r=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=c(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=a?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}(n(6271)),a=n(4946),i=n(7304),o=n(4758),u=n(835),l=(n(3318),n(8717),n(5871));function c(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(c=function(t){return t?n:e})(t)}function s(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return d(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}e.TreatmentEffectExplorer=function(t){var e=t.data,n=void 0===e?[]:e,c=t.treatment,d=void 0===c?"treatment":c,f=t.outcome,m=void 0===f?"outcome":f,h=t.effect,p=void 0===h?"effect":h,g=r.default.useState([]),y=g[0],v=g[1],x=r.default.useState({}),b=x[0],j=x[1],k=r.default.useState({}),w=k[0],E=k[1],M=r.default.useState([]),O=M[0],S=M[1],A=r.default.useState([0,0]),C=A[0],_=A[1],P=r.default.useState([]),D=P[0],L=P[1],T=r.default.useState([]),B=T[0],I=T[1];function W(t,e,n){var r,a;return n?(r=t.filter((function(t){return t[e]<n})),a=t.filter((function(t){return t[e]>n})),[{data:r,title:"< "+n},{data:a,title:">= "+n}]):(r=t.filter((function(t){return 0===t[e]})),a=t.filter((function(t){return 1===t[e]})),[{data:r,title:e+" = 0"},{data:a,title:e+" = 1"}])}return(0,r.useEffect)((function(){var t=new Set(Object.keys(n[0]));t.delete(d),t.delete(m),t=Array.from(t),v(t);var e=JSON.parse(JSON.stringify(n)).map((function(t){return t.outcome=t.weight?t.outcome*t.weight:t.outcome,t}));S(e);for(var r,i={},o={},u=function(){var t=r.value,e=n.map((function(e){return e[t]})),u=Array.from(new Set(e));i[t]=u;var l=(0,a.extent)(e);o[t]=l},l=s(t);!(r=l()).done;)u();j(i),E(o),_((0,a.extent)(n,(function(t){return t[p]})))}),[n]),(0,r.useEffect)((function(){var t=[];if(1===D.length)t.push({data:JSON.parse(JSON.stringify(O)),stratifyBy:D[0].attribute,stratifyExtent:w[D[0].attribute],title:"",layout:{height:600,width:600,margin:20,marginLeft:50,marginBottom:35}}),I([].concat(t));else if(2===D.length){var e=W(O,D[1].attribute,D[1].threshold);e=e.map((function(t){return t.stratifyBy=D[0].attribute,t.stratifyExtent=w[D[0].attribute],t.layout={height:600,width:300,margin:20,marginLeft:50,marginBottom:35},t})),I([].concat(e))}else if(3===D.length){for(var n,r=[],a=W(O,D[2].attribute,D[2].threshold),i=function(){var t=n.value,e=t.title,a=W(t.data,D[1].attribute,D[1].threshold);a=a.map((function(t){return t.stratifyBy=D[0].attribute,t.stratifyExtent=w[D[0].attribute],t.layout={height:300,width:300,margin:20,marginLeft:50,marginBottom:35},t.title=e+", "+t.title,t})),r=r.concat(a)},o=s(a=a.reverse());!(n=o()).done;)i();I([].concat(r))}else 0===D.length&&(t.push({data:JSON.parse(JSON.stringify(O)),stratifyBy:"",stratifyExtent:[0,0],title:"",layout:{height:600,width:600,margin:20,marginLeft:50,marginBottom:35}}),I([].concat(t)))}),[D,O]),r.default.createElement("div",{style:{display:"grid",gridTemplateColumns:"auto auto 1fr",gridTemplateRows:"auto auto 1fr",gridGap:"20px"}},r.default.createElement("div",{style:{gridColumn:"1/2",gridRow:"3/4",display:"flex",alignItems:"center"}},r.default.createElement(u.CovariatesManager,{attributes:y,changeStratify:function(t){var e=D.map((function(t){return t.attribute})).indexOf(t);if(e<0){if(3===D.length)return;var r=2===b[t].length?null:(0,a.mean)(n,(function(e){return e[t]})).toPrecision(3);D.push({attribute:t,threshold:r}),L([].concat(D))}else D.splice(e,1),L([].concat(D))},stratify:D.map((function(t){return t.attribute}))})),r.default.createElement("div",{style:{gridColumn:"3/4",gridRow:"1/2",display:"flex",flexDirection:"column",alignItems:"center",width:"600px"}},r.default.createElement("p",{style:{fontSize:"16px",fontFamily:"sans-serif"}},"Treatment Effect Plot")),r.default.createElement("div",{style:{gridColumn:"3/4",gridRow:"2/3",width:"600px"}},D[1]?r.default.createElement(o.BeeswarmTop,{data:O,stratify:D[1].attribute,thresholdValue:D[1].threshold,updateTopThreshold:function(t){D[1].threshold=t,L([].concat(D))},isBinary:2===b[D[1].attribute].length}):r.default.createElement("div",null)),r.default.createElement("div",{style:{gridColumn:"2/3",gridRow:"3/4"}},D[2]?r.default.createElement(i.BeeswarmLeft,{data:O,stratify:D[2].attribute,thresholdValue:D[2].threshold,updateLeftThreshold:function(t){D[2].threshold=t,L([].concat(D))},isBinary:2===b[D[2].attribute].length}):r.default.createElement("div",null)),r.default.createElement("div",{style:{gridColumn:"3/4",gridRow:"3/4",width:"600px",height:"600px",display:"grid",gridTemplateColumns:"1fr 1fr",gridTemplateRows:"1fr 1fr"}},B.map((function(t,e){return r.default.createElement(l.TreatmentEffectVisViolin,{key:"vis"+t.stratifyBy+e,index:e,allData:t,effectExtent:C,isBinary:!!b[t.stratifyBy]&&2===b[t.stratifyBy].length})}))))}},7619:(t,e,n)=>{e.__esModule=!0,e.VersionHistory=void 0;var r=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=l(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=a?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}(n(6271)),a=n(6191),i=n(7754),o=n(6594),u=n(5393);function l(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(l=function(t){return t?n:e})(t)}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}e.VersionHistory=function(t){var e=t.versions,n=void 0===e?[]:e,l=t.effect,s=void 0===l?"":l,d=(t.ITE,t._dag),f=t._cohort,m=r.default.useState({}),h=m[0],p=m[1],g=r.default.useState({height:120,width:1200,margin:30,marginLeft:10,marginBottom:30}),y=g[0],v=g[1],x=r.default.useState({children:[],name:"All Versions"}),b=x[0],j=x[1],k=r.default.useState(new Set),w=k[0],E=k[1],M=r.default.useState({}),O=M[0],S=M[1],A=r.default.useState((function(){return function(t){return"black"}})),C=A[0],_=A[1],P=r.default.useState([]),D=P[0],L=P[1];return(0,r.useEffect)((function(){for(var t,e,r=[],o={},u=[],l=[],s={},d=function(){var e=t.value,n=e.DAG,a=JSON.stringify(n),i=r.filter((function(t){return t===a})).length>0,c=Object.keys(e.Cohort[0]);u.push(c),l=l.concat(c);for(var d=function(){var t=m[f],n=Array.from(new Set(e.Cohort.map((function(e){return e[t]}))));s[t]=t in s?s[t].concat(n):n},f=0,m=c;f<m.length;f++)d();if(i){var h=o[a].length;o[a].push({name:"Cohort "+(h+1)+": "+e.Cohort.length+" rows",Cohort:e.Cohort,ATE:e.ATE})}else r.push(a),o[a]=[{name:"Cohort 1: "+e.Cohort.length+" rows",Cohort:e.Cohort,ATE:e.ATE}]},f=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(n);!(t=f()).done;)d();p(o),e=r.length>1?i.schemeYlGnBu[r.length+1].slice(1):1===r.length?[i.schemeYlGnBu[3][1]]:["gray"];var m=(0,a.scaleOrdinal)().domain(r).range(e);_((function(){return function(t){return m(t)}}));for(var h=0,g=Object.keys(s);h<g.length;h++){var y=g[h];s[y]=Array.from(new Set(s[y]))}L(u),E(new Set(l)),S(s);for(var x={children:[],name:"All Versions"},b=Object.keys(o),k=b.length,w=0;w<k;w++){var M=b[w];x.children.push({name:"DAG "+(w+1),DAG:JSON.parse(M),id:w,children:o[M]})}j(x),n.length>5&&v({height:24*n.length,width:1200,margin:30,marginLeft:10,marginBottom:30})}),[n]),r.default.createElement("div",null,r.default.createElement(u.VersionTree,{layout:y,data:b,colorScale:C,_dag:d,_cohort:f}),n.length>0?r.default.createElement(o.CompareVersions,{versions:n,hierarchy:h,allAttributes:w,versionAttributes:D,attributeLevels:O,effect:s,colorScale:C}):r.default.createElement("div",null))}},2798:(t,e,n)=>{e.__esModule=!0,e.Attribute=void 0;var r,a=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=o(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var u=a?Object.getOwnPropertyDescriptor(t,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}(n(6271)),i=(r=n(2093))&&r.__esModule?r:{default:r};function o(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(o=function(t){return t?n:e})(t)}e.Attribute=function(t){var e=t.value,n=void 0===e?"":e,r=t.color,o=void 0===r?"black":r,u=t.changeStratify,l={grey:{rgb:"rgb(158, 158, 158)",rgba:"rgba(158, 158, 158, 0.05)"},treatment:{rgb:"rgb(78, 121, 167)",rgba:"rgba(78, 121, 167, 0.05)"},outcome:{rgb:"rgb(242, 142, 44)",rgba:"rgba(242, 142, 44, 0.05)"},black:{rgb:"rgb(0, 0, 0)",rgba:"rgba(0, 0, 0, 0.05)"}},c={width:"100%",marginBottom:"5px",color:l[o].rgb,borderColor:l[o].rgb,"&:hover":{borderColor:l[o].rgb,backgroundColor:l[o].rgba}};return a.default.createElement("div",null,a.default.createElement(i.default,{sx:c,onClick:function(){return u(n)},variant:"outlined"},a.default.createElement("a",{title:"click to add"},n)))}},6074:(t,e,n)=>{e.__esModule=!0,e.AttributesManager=void 0;var r=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=o(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var u=a?Object.getOwnPropertyDescriptor(t,i):null;u&&(u.get||u.set)?Object.defineProperty(r,i,u):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}(n(6271)),a=(n(461),n(4368),n(2798));function i(t){return t&&t.__esModule?t:{default:t}}function o(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(o=function(t){return t?n:e})(t)}i(n(2093)),i(n(2441)),i(n(960)),i(n(4431)),e.AttributesManager=function(t){var e=t.attributes,n=void 0===e?[]:e,i=(t.changeStratify,t.stratify),o=void 0===i?[]:i,u=t.setStratifyBy;return r.default.createElement("div",null,r.default.createElement("div",{style:{display:"flex",width:"150px",flexDirection:"column",height:"500px",overflow:"scroll",marginRight:"50px"}},n.map((function(t,e){return r.default.createElement(a.Attribute,{value:t,key:"covariate"+e,changeStratify:u,color:o.indexOf(t)<0?"grey":"black"})}))))}},6594:(t,e,n)=>{e.__esModule=!0,e.CompareVersions=void 0;var r=function(t,e){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=c(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if("default"!==i&&Object.prototype.hasOwnProperty.call(t,i)){var o=a?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}(n(6271)),a=(n(6074),n(2133)),i=n(4946),o=l(n(2489)),u=l(n(3332));function l(t){return t&&t.__esModule?t:{default:t}}function c(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(c=function(t){return t?n:e})(t)}function s(){return s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},s.apply(this,arguments)}function d(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return f(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}e.CompareVersions=function(t){t.versions;var e=t.hierarchy,n=void 0===e?{}:e,l=t.allAttributes,c=void 0===l?[]:l,f=t.versionAttributes,m=void 0===f?{}:f,h=t.attributeLevels,p=void 0===h?{}:h,g=t.effect,y=void 0===g?"":g,v=t.colorScale,x=r.default.useState([]),b=x[0],j=x[1],k=r.default.useState([]),w=k[0],E=k[1],M=r.default.useState(""),O=M[0],S=M[1];function A(t){for(var e,n=0,r=d(t);!(e=r()).done;)n+=e.value[y];return n/t.length}(0,r.useEffect)((function(){for(var t=Object.keys(n),e=[],r=0;r<t.length;r++)for(var a,i=t[r],o=d(n[i]);!(a=o()).done;){var u=a.value;u.DAG=JSON.parse(i),u.name="DAG "+(r+1)+": "+u.name,e.push(u)}E(e)}),[n]),(0,r.useEffect)((function(){if(""==O){for(var t,e=[],n=d(w);!(t=n()).done;){var r=t.value;e.push({ATE:r.ATE,DAG:r.DAG,name:r.name})}j(e)}else{for(var a=[],o=0;o<w.length;o++){var u=w[o];if(!(m[o].indexOf(O)<0))if(""===y)a.push({ATE:u.ATE,DAG:u.DAG,name:u.name});else if(p[O].length>2)!function(){var t=(0,i.mean)(p[O]),e=u.Cohort.filter((function(e){return e[O]<t})),n=u.Cohort.filter((function(e){return e[O]>=t})),r=A(e),o=A(n);a.push({ATE:r,group:"<"+t.toPrecision(2),DAG:u.DAG,name:u.name}),a.push({ATE:o,group:">="+t.toPrecision(2),DAG:u.DAG,name:u.name})}();else if(2==p[O].length){var l=u.Cohort.filter((function(t){return 0===t[O]})),c=u.Cohort.filter((function(t){return 1===t[O]})),s=A(l),f=A(c);a.push({ATE:s,group:"0",DAG:u.DAG,name:u.name}),a.push({ATE:f,group:"1",DAG:u.DAG,name:u.name})}else a.push({ATE:u.ATE,DAG:u.DAG,name:u.name})}j(a)}}),[w,O,p]);var C={height:"48px",borderRadius:"24px",marginTop:"11px","& .MuiOutlinedInput-input":{height:"12px"},"& .MuiOutlinedInput-root":{padding:"11px"},"& .MuiInputLabel-formControl":{top:"-1px"}};return r.default.createElement("div",{style:{display:"block"}},r.default.createElement(o.default,{disablePortal:!0,id:"combo-box-demo",options:Array.from(c),sx:{width:300},onChange:function(t,e){return function(t,e){S(e||"")}(0,e)},renderInput:function(t){return r.default.createElement(u.default,s({},t,{sx:C,label:"Group by"}))}}),r.default.createElement(a.CompareVersionsVis,{data:b,stratifyBy:O,colorScale:v}))}},2133:(t,e,n)=>{e.__esModule=!0,e.CompareVersionsVis=void 0;var r=o(n(6271)),a=o(n(5651));function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(i=function(t){return t?n:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=i(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var u=a?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}e.CompareVersionsVis=function(t){var e=t.layout,n=void 0===e?{height:120,width:1200,margin:35,marginLeft:50,marginBottom:30}:e,i=t.data,o=void 0===i?[]:i,u=t.stratifyBy,l=void 0===u?"":u,c=t.colorScale,s=r.default.useState(o),d=s[0],f=s[1],m=r.default.useState(l),h=m[0],p=m[1];(0,r.useEffect)((function(){f(o)}),[o]),(0,r.useEffect)((function(){p(l)}),[l]);var g=(0,r.useRef)("svgCompareVersionsVis"),y=a.select(g.current).select("g");return(0,r.useEffect)((function(){var t,e=a.extent(d,(function(t){return t.ATE})),r=a.scaleLinear().domain(a.extent(d,(function(t){return t.ATE}))).range([n.marginLeft,n.width-n.margin]),i=a.select("#tooltip").attr("opacity",0),o=i.select("#tooltip_text").attr("text-anchor","middle").attr("alignment-baseline","hanging").attr("x","11").attr("y","1").style("font-size","11px").style("font-family","sans-serif");""!=l&&(t=a.scaleOrdinal().domain(a.extent(d,(function(t){return t.group}))).range([n.margin+10,n.height-n.margin-10])),e[0]<0&&e[1]>0&&y.select("#ate").selectAll(".zeroLine").data([0]).join("line").attr("class","zeroLine").attr("x1",(function(t){return r(0)})).attr("y1",n.margin).attr("x2",(function(t){return r(0)})).attr("y2",n.height-n.margin).attr("stroke","black").attr("stroke-dasharray","5 5 2 5"),y.select("#ate").selectAll(".atePoints").data(d).join("circle").attr("class","atePoints").attr("cx",(function(t){return r(t.ATE)})).attr("cy",(function(e){return l?t(e.group):n.height/2})).attr("r",5).attr("fill",(function(t){return c(JSON.stringify(t.DAG))})).attr("opacity","0.48").attr("cursor","pointer").on("mouseover",(function(e,a){a.ATE;var u=a.group,c=a.name;i.attr("opacity",1).attr("transform","translate("+(r(a.ATE)-11)+", "+(l?t(u)-18:n.height/2-18)+")"),o.text(""+c)})).on("mouseout",(function(){i.attr("opacity",0)})),y.select("#x-axis").attr("transform","translate(0, "+(n.height-n.margin+10)+")").call(a.axisBottom(r).tickSize(3).ticks(5)),y.selectAll("#x-axis").selectAll(".axisText").data(["ATE"]).join("text").attr("class","axisText").attr("transform","translate("+(n.width-n.margin)+", 25)").attr("font-family","sans-serif").attr("fill","black").text((function(t){return t})),t?y.select("#y-axis").attr("opacity",1).attr("transform","translate("+(n.marginLeft-10)+", 0)").call(a.axisLeft(t)).call((function(t){return t.select(".domain").remove()})):y.select("#y-axis").attr("opacity",0)}),[d,h]),r.default.createElement("div",null,r.default.createElement("svg",{width:n.width,height:n.height,ref:g,id:"svgCompareVersionsVis"},r.default.createElement("g",null,r.default.createElement("g",{id:"ate"}),r.default.createElement("g",{id:"x-axis"}),r.default.createElement("g",{id:"y-axis"}),r.default.createElement("g",{id:"tooltip"},r.default.createElement("rect",{id:"tooltip_rect"}),r.default.createElement("text",{id:"tooltip_text"})))))}},5393:(t,e,n)=>{e.__esModule=!0,e.VersionTree=void 0;var r=o(n(6271)),a=o(n(5651));function i(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(i=function(t){return t?n:e})(t)}function o(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var n=i(e);if(n&&n.has(t))return n.get(t);var r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var u=a?Object.getOwnPropertyDescriptor(t,o):null;u&&(u.get||u.set)?Object.defineProperty(r,o,u):r[o]=t[o]}return r.default=t,n&&n.set(t,r),r}e.VersionTree=function(t){var e=t.layout,n=void 0===e?{height:120,width:1200,margin:30,marginLeft:10,marginBottom:30}:e,i=t.data,o=void 0===i?{children:[],name:"All Versions"}:i,u=t.colorScale,l=t._dag,c=t._cohort,s=(0,r.useRef)("svgVersionTree"),d=a.select(s.current),f=d.select("svg"),m=function(t){var e=a.hierarchy(t).sum((function(t){return t.children?0:1}));return a.partition().size([n.height,(e.height+1)*n.width/3])(e)}(o),h=m,p=h.data.name,g=f.select("#rect").selectAll("rect").data(m.descendants()).join("rect").attr("transform",(function(t){return"translate("+t.y0+","+t.x0+")"})).attr("width",(function(t){return t.y1-t.y0-1})).attr("height",(function(t){return j(t)})).attr("fill-opacity",.48).attr("fill",(function(t){if(!t.depth)return"#ccc";for(;t.depth>1;)t=t.parent;return u(JSON.stringify(t.data.DAG))})).style("cursor","pointer").on("click",(function(t,e){h=h===e?e=e.parent:e,p=h.data.name,function(t){var e,n=document.getElementById(l),r=document.getElementById(c);(t.data.DAG&&n&&(n.value=JSON.stringify(t.data.DAG),(e=document.createEvent("HTMLEvents")).initEvent("input",!1,!0),n.dispatchEvent(e),r&&(r.value="",(e=document.createEvent("HTMLEvents")).initEvent("input",!1,!0),r.dispatchEvent(e))),t.data.Cohort&&r)&&(r.value=JSON.stringify(t.data.Cohort),(e=document.createEvent("HTMLEvents")).initEvent("input",!1,!0),r.dispatchEvent(e),n&&(n.value="",(e=document.createEvent("HTMLEvents")).initEvent("input",!1,!0),n.dispatchEvent(e)))}(h),m.each((function(t){return t.target={x0:(t.x0-e.x0)/(e.x1-e.x0)*n.height,x1:(t.x1-e.x0)/(e.x1-e.x0)*n.height,y0:t.y0-e.y0,y1:t.y1-e.y0}}));var r=g.transition().duration(750).attr("transform",(function(t){return"translate("+t.target.y0+","+t.target.x0+")"})),a=y.transition().duration(750).attr("transform",(function(t){return"translate("+t.target.y0+","+t.target.x0+")"})),i=v.transition().duration(750).attr("transform",(function(t){return"translate("+t.target.y0+","+t.target.x0+")"}));g.transition(r).attr("height",(function(t){return j(t.target)})),y.transition(a).attr("fill-opacity",(function(t){return+k(t.target)})),v.transition(i).attr("fill-opacity",(function(t){return.7*k(t.target)})),x.text(b(p))})),y=f.select("#text").selectAll("text").data(m.descendants()).join("text").attr("transform",(function(t){return"translate("+t.y0+","+t.x0+")"})).style("user-select","none").attr("pointer-events","none").attr("x",5).attr("y",12).attr("fill-opacity",(function(t){return+k(t)})).text((function(t){return t.data.name})).attr("font-family","sans-serif").attr("font-size","10px"),v=f.select("#tspan").selectAll("tspan").data(m.descendants()).join("tspan").attr("transform",(function(t){return"translate("+t.y0+","+t.x0+")"})).text((function(t){return t.data.name})).attr("font-family","sans-serif").attr("font-size","10px"),x=d.select("#selectedTitle").attr("font-family","sans-serif").attr("font-size","11px").selectAll("text").data([p]).join("text").text((function(t){return b(t)}));function b(t){return"All Versions"!==t?"Showing "+t+". ":"Showing All Versions. "}function j(t){return t.x1-t.x0-Math.min(1,(t.x1-t.x0)/2)}function k(t){return t.y1<=n.width&&t.y0>=0&&t.x1-t.x0>16}return r.default.createElement("div",{ref:s},r.default.createElement("div",{style:{fontFamily:"sans-serif",fontSize:"13px",display:"flex",alignItems:"center"}},r.default.createElement("p",{id:"selectedTitle"})),r.default.createElement("svg",{width:n.width,height:n.height,id:"svgVersionTree"},r.default.createElement("g",{id:"rect"}),r.default.createElement("g",{id:"text"}),r.default.createElement("g",{id:"tspan"})))}}}]);